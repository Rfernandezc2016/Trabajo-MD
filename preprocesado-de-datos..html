<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>4 Preprocesado de datos. | Memoria del trabajo</title>
  <meta name="description" content="4 Preprocesado de datos. | Memoria del trabajo" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="4 Preprocesado de datos. | Memoria del trabajo" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="4 Preprocesado de datos. | Memoria del trabajo" />
  
  
  

<meta name="author" content="Adrián Rocha De la Casa, Yassin Khalifa Martino y Rocío Fernández Cebrián" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="datos.html"/>
<link rel="next" href="modelado.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="introducción.html"><a href="introducción.html"><i class="fa fa-check"></i><b>1</b> Introducción</a></li>
<li class="chapter" data-level="2" data-path="objetivos.html"><a href="objetivos.html"><i class="fa fa-check"></i><b>2</b> Objetivos</a></li>
<li class="chapter" data-level="3" data-path="datos.html"><a href="datos.html"><i class="fa fa-check"></i><b>3</b> Datos</a></li>
<li class="chapter" data-level="4" data-path="preprocesado-de-datos..html"><a href="preprocesado-de-datos..html"><i class="fa fa-check"></i><b>4</b> Preprocesado de datos.</a>
<ul>
<li class="chapter" data-level="4.1" data-path="preprocesado-de-datos..html"><a href="preprocesado-de-datos..html#particiones."><i class="fa fa-check"></i><b>4.1</b> Particiones.</a></li>
<li class="chapter" data-level="4.2" data-path="preprocesado-de-datos..html"><a href="preprocesado-de-datos..html#eda.-exploratory-data-analysis."><i class="fa fa-check"></i><b>4.2</b> EDA. Exploratory Data Analysis.</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="preprocesado-de-datos..html"><a href="preprocesado-de-datos..html#letalidad"><i class="fa fa-check"></i><b>4.2.1</b> Letalidad:</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="preprocesado-de-datos..html"><a href="preprocesado-de-datos..html#correlación-entre-las-variables."><i class="fa fa-check"></i><b>4.3</b> Correlación entre las variables.</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="preprocesado-de-datos..html"><a href="preprocesado-de-datos..html#forma-del-sombrero-forma_s"><i class="fa fa-check"></i><b>4.3.1</b> Forma del sombrero (Forma_S)</a></li>
<li class="chapter" data-level="4.3.2" data-path="preprocesado-de-datos..html"><a href="preprocesado-de-datos..html#cutícula"><i class="fa fa-check"></i><b>4.3.2</b> Cutícula</a></li>
<li class="chapter" data-level="4.3.3" data-path="preprocesado-de-datos..html"><a href="preprocesado-de-datos..html#color-del-sombrero-color_s"><i class="fa fa-check"></i><b>4.3.3</b> Color del sombrero (Color_S)</a></li>
<li class="chapter" data-level="4.3.4" data-path="preprocesado-de-datos..html"><a href="preprocesado-de-datos..html#escamas"><i class="fa fa-check"></i><b>4.3.4</b> Escamas</a></li>
<li class="chapter" data-level="4.3.5" data-path="preprocesado-de-datos..html"><a href="preprocesado-de-datos..html#olor"><i class="fa fa-check"></i><b>4.3.5</b> Olor</a></li>
<li class="chapter" data-level="4.3.6" data-path="preprocesado-de-datos..html"><a href="preprocesado-de-datos..html#fijación-de-las-láminas-fijacion_l"><i class="fa fa-check"></i><b>4.3.6</b> Fijación de las láminas (Fijacion_L)</a></li>
<li class="chapter" data-level="4.3.7" data-path="preprocesado-de-datos..html"><a href="preprocesado-de-datos..html#espacio-entre-láminas-espacio_l"><i class="fa fa-check"></i><b>4.3.7</b> Espacio entre láminas (Espacio_L)</a></li>
<li class="chapter" data-level="4.3.8" data-path="preprocesado-de-datos..html"><a href="preprocesado-de-datos..html#tamaño-de-las-láminas-tamaño_l"><i class="fa fa-check"></i><b>4.3.8</b> Tamaño de las láminas (Tamaño_L)</a></li>
<li class="chapter" data-level="4.3.9" data-path="preprocesado-de-datos..html"><a href="preprocesado-de-datos..html#color-de-las-láminas-color_l"><i class="fa fa-check"></i><b>4.3.9</b> Color de las láminas (Color_L)</a></li>
<li class="chapter" data-level="4.3.10" data-path="preprocesado-de-datos..html"><a href="preprocesado-de-datos..html#forma-del-tallo-forma_t"><i class="fa fa-check"></i><b>4.3.10</b> Forma del tallo (Forma_T)</a></li>
<li class="chapter" data-level="4.3.11" data-path="preprocesado-de-datos..html"><a href="preprocesado-de-datos..html#tallo-raíz-tallo_raiz"><i class="fa fa-check"></i><b>4.3.11</b> Tallo-Raíz (Tallo_raiz)</a></li>
<li class="chapter" data-level="4.3.12" data-path="preprocesado-de-datos..html"><a href="preprocesado-de-datos..html#superficie-del-tallo-por-encima-del-anillo-superficie_t1"><i class="fa fa-check"></i><b>4.3.12</b> Superficie del tallo por encima del anillo (Superficie_T1)</a></li>
<li class="chapter" data-level="4.3.13" data-path="preprocesado-de-datos..html"><a href="preprocesado-de-datos..html#superficie-del-tallo-por-debajo-del-anillo-superficie_t2"><i class="fa fa-check"></i><b>4.3.13</b> Superficie del tallo por debajo del anillo (Superficie_T2)</a></li>
<li class="chapter" data-level="4.3.14" data-path="preprocesado-de-datos..html"><a href="preprocesado-de-datos..html#color-del-tallo-por-encima-del-anillo-color_t1"><i class="fa fa-check"></i><b>4.3.14</b> Color del tallo por encima del anillo (Color_T1)</a></li>
<li class="chapter" data-level="4.3.15" data-path="preprocesado-de-datos..html"><a href="preprocesado-de-datos..html#color-del-tallo-por-debajo-del-anillo-color_t2"><i class="fa fa-check"></i><b>4.3.15</b> Color del tallo por debajo del anillo (Color_T2)</a></li>
<li class="chapter" data-level="4.3.16" data-path="preprocesado-de-datos..html"><a href="preprocesado-de-datos..html#color-del-volva-color_v"><i class="fa fa-check"></i><b>4.3.16</b> Color del volva (Color_V)</a></li>
<li class="chapter" data-level="4.3.17" data-path="preprocesado-de-datos..html"><a href="preprocesado-de-datos..html#número-de-anillos-n_anillos"><i class="fa fa-check"></i><b>4.3.17</b> Número de anillos (N_anillos)</a></li>
<li class="chapter" data-level="4.3.18" data-path="preprocesado-de-datos..html"><a href="preprocesado-de-datos..html#tipo-de-anillo-tipo_anillo"><i class="fa fa-check"></i><b>4.3.18</b> Tipo de anillo (Tipo_anillo)</a></li>
<li class="chapter" data-level="4.3.19" data-path="preprocesado-de-datos..html"><a href="preprocesado-de-datos..html#color-de-las-esporas"><i class="fa fa-check"></i><b>4.3.19</b> Color de las esporas</a></li>
<li class="chapter" data-level="4.3.20" data-path="preprocesado-de-datos..html"><a href="preprocesado-de-datos..html#población"><i class="fa fa-check"></i><b>4.3.20</b> Población</a></li>
<li class="chapter" data-level="4.3.21" data-path="preprocesado-de-datos..html"><a href="preprocesado-de-datos..html#habitat"><i class="fa fa-check"></i><b>4.3.21</b> Habitat</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="preprocesado-de-datos..html"><a href="preprocesado-de-datos..html#componentes-principales"><i class="fa fa-check"></i><b>4.4</b> Componentes principales</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="preprocesado-de-datos..html"><a href="preprocesado-de-datos..html#proceso-previo"><i class="fa fa-check"></i><b>4.4.1</b> Proceso previo</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="preprocesado-de-datos..html"><a href="preprocesado-de-datos..html#transformación-de-variables"><i class="fa fa-check"></i><b>4.5</b> Transformación de variables</a></li>
<li class="chapter" data-level="4.6" data-path="preprocesado-de-datos..html"><a href="preprocesado-de-datos..html#imputación-de-datos-datos-faltantes"><i class="fa fa-check"></i><b>4.6</b> Imputación de datos (datos faltantes)</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="modelado.html"><a href="modelado.html"><i class="fa fa-check"></i><b>5</b> Modelado</a>
<ul>
<li class="chapter" data-level="5.1" data-path="modelado.html"><a href="modelado.html#análisis-clúster"><i class="fa fa-check"></i><b>5.1</b> Análisis Clúster</a></li>
<li class="chapter" data-level="5.2" data-path="modelado.html"><a href="modelado.html#k-nn"><i class="fa fa-check"></i><b>5.2</b> k-NN</a></li>
<li class="chapter" data-level="5.3" data-path="modelado.html"><a href="modelado.html#arboles-de-decisión"><i class="fa fa-check"></i><b>5.3</b> Arboles de Decisión</a></li>
<li class="chapter" data-level="5.4" data-path="modelado.html"><a href="modelado.html#bosques-aleatorios"><i class="fa fa-check"></i><b>5.4</b> Bosques Aleatorios</a></li>
<li class="chapter" data-level="5.5" data-path="modelado.html"><a href="modelado.html#support-vector-machines"><i class="fa fa-check"></i><b>5.5</b> Support Vector Machines</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="evaluación.html"><a href="evaluación.html"><i class="fa fa-check"></i><b>6</b> Evaluación</a></li>
<li class="chapter" data-level="7" data-path="actualización-del-modelo.html"><a href="actualización-del-modelo.html"><i class="fa fa-check"></i><b>7</b> Actualización del modelo…</a>
<ul>
<li class="chapter" data-level="7.1" data-path="actualización-del-modelo.html"><a href="actualización-del-modelo.html#datos-sin-variable-olor"><i class="fa fa-check"></i><b>7.1</b> Datos sin variable <strong>Olor</strong></a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="actualización-del-modelo.html"><a href="actualización-del-modelo.html#análisis-cluster"><i class="fa fa-check"></i><b>7.1.1</b> Análisis Cluster</a></li>
<li class="chapter" data-level="7.1.2" data-path="actualización-del-modelo.html"><a href="actualización-del-modelo.html#k-nn-1"><i class="fa fa-check"></i><b>7.1.2</b> k-NN</a></li>
<li class="chapter" data-level="7.1.3" data-path="actualización-del-modelo.html"><a href="actualización-del-modelo.html#arboles-de-decisión-1"><i class="fa fa-check"></i><b>7.1.3</b> Arboles de Decisión</a></li>
<li class="chapter" data-level="7.1.4" data-path="actualización-del-modelo.html"><a href="actualización-del-modelo.html#bosques-aleatorios-1"><i class="fa fa-check"></i><b>7.1.4</b> Bosques Aleatorios</a></li>
<li class="chapter" data-level="7.1.5" data-path="actualización-del-modelo.html"><a href="actualización-del-modelo.html#support-vector-machines-1"><i class="fa fa-check"></i><b>7.1.5</b> Support Vector Machines</a></li>
<li class="chapter" data-level="7.1.6" data-path="actualización-del-modelo.html"><a href="actualización-del-modelo.html#evaluación-1"><i class="fa fa-check"></i><b>7.1.6</b> Evaluación</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="actualización-del-modelo.html"><a href="actualización-del-modelo.html#datos-con-variable-olorn"><i class="fa fa-check"></i><b>7.2</b> Datos con variable <strong>Olor=n</strong></a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="actualización-del-modelo.html"><a href="actualización-del-modelo.html#análisis-cluster-1"><i class="fa fa-check"></i><b>7.2.1</b> Análisis Cluster</a></li>
<li class="chapter" data-level="7.2.2" data-path="actualización-del-modelo.html"><a href="actualización-del-modelo.html#k-nn-2"><i class="fa fa-check"></i><b>7.2.2</b> k-NN</a></li>
<li class="chapter" data-level="7.2.3" data-path="actualización-del-modelo.html"><a href="actualización-del-modelo.html#arboles-de-decisión-2"><i class="fa fa-check"></i><b>7.2.3</b> Arboles de Decisión</a></li>
<li class="chapter" data-level="7.2.4" data-path="actualización-del-modelo.html"><a href="actualización-del-modelo.html#bosques-aleatorios-2"><i class="fa fa-check"></i><b>7.2.4</b> Bosques Aleatorios</a></li>
<li class="chapter" data-level="7.2.5" data-path="actualización-del-modelo.html"><a href="actualización-del-modelo.html#support-vector-machines-2"><i class="fa fa-check"></i><b>7.2.5</b> Support Vector Machines</a></li>
<li class="chapter" data-level="7.2.6" data-path="actualización-del-modelo.html"><a href="actualización-del-modelo.html#evaluación-2"><i class="fa fa-check"></i><b>7.2.6</b> Evaluación</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="actualización-del-modelo.html"><a href="actualización-del-modelo.html#evaluación-de-los-tres-análisis"><i class="fa fa-check"></i><b>7.3</b> Evaluación de los tres análisis</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Memoria del trabajo</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="preprocesado-de-datos." class="section level1" number="4">
<h1><span class="header-section-number">4</span> Preprocesado de datos.</h1>
<p>Para poder transformar las variables en factores, lo hacemos aplicando el comando <strong>as.factor()</strong> a todas las variables.</p>
<p>Ahora podemos ver mejor como son nuestros datos.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="preprocesado-de-datos..html#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(datos.setas)</span></code></pre></div>
<pre><code>##  Letalidad Forma_S  Cuticula    Color_S     Escamas       Olor      Fijacion_L
##  e:4208    b: 452   f:2320   n      :2284   f:4748   n      :3528   a: 210    
##  p:3916    c:   4   g:   4   g      :1840   t:3376   f      :2160   f:7914    
##            f:3152   s:2556   e      :1500            s      : 576             
##            k: 828   y:3244   y      :1072            y      : 576             
##            s:  32            w      :1040            a      : 400             
##            x:3656            b      : 168            l      : 400             
##                              (Other): 220            (Other): 484             
##  Espacio_L Tamaño_L    Color_L     Forma_T  Tallo_raiz Superficie_T1
##  c:6812    b:5612   b      :1728   e:3516   ?:2480     f: 552       
##  w:1312    n:2512   p      :1492   t:4608   b:3776     k:2372       
##                     w      :1202            c: 556     s:5176       
##                     n      :1048            e:1120     y:  24       
##                     g      : 752            r: 192                  
##                     h      : 732                                    
##                     (Other):1170                                    
##  Superficie_T2    Color_T1       Color_T2    Tipo_V   Color_V  N_anillos
##  f: 600        w      :4464   w      :4384   p:8124   n:  96   n:  36   
##  k:2304        p      :1872   p      :1872            o:  96   o:7488   
##  s:4936        g      : 576   g      : 576            w:7924   t: 600   
##  y: 284        n      : 448   n      : 512            y:   8            
##                b      : 432   b      : 432                              
##                o      : 192   o      : 192                              
##                (Other): 140   (Other): 156                              
##  Tipo_anillo Color_esporas  Poblacion Habitat 
##  e:2776      w      :2388   a: 384    d:3148  
##  f:  48      n      :1968   c: 340    g:2148  
##  l:1296      k      :1872   n: 400    l: 832  
##  n:  36      h      :1632   s:1248    m: 292  
##  p:3968      r      :  72   v:4040    p:1144  
##              b      :  48   y:1712    u: 368  
##              (Other): 144             w: 192</code></pre>
<p>Una de las variables, <strong>Tipo_v</strong> (tipo de volva) con dos niveles distintos, parcial (p) y universal (u), podríamos eliminarla de nuestros datos pues todo la frecuencia solo está en uno de los niveles, luego no aporta información alguna para determinar si es venenosa o comestible.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="preprocesado-de-datos..html#cb10-1" aria-hidden="true" tabindex="-1"></a>datos.setas<span class="ot">=</span>datos.setas[,<span class="sc">-</span><span class="dv">17</span>]</span></code></pre></div>
<p>Quizás trabajar con este tipo de datos no sea lo más adecuado, por ello nos planteamos codificar las variables de forma que sean binarias, para ello cada subnivel de las variables originales se va a convertir en una nueva variables binaria, de forma que será 0 si no se presenta ese subnivel en la variable original y 1 si si lo hace.</p>
<p>En la variable respuesta, establecemos que 1 es si la seta es venenosa y 0 si no lo es. La variable <strong>Escamas</strong>, la codificamos como 1 si presenta escamas y 0 si no tiene escamas. Y la variable <strong>Tamaño_L</strong>, establecemos que es 1 es si el tamaño de las láminas de la seta es ancho y 0 si es estrecho. Por último la variable <strong>Forma_T</strong>, la establecemos como 1 si es agrandado y 0 si es afilado.</p>
<p>Además, la variable <strong>Fijacion_L</strong> tendría solo dos subniveles pues los subnivel descendente y entallado no aparecen en los datos, por ello establecemos que 1 es si la variable <strong>Fijacion_L</strong> es adjunto y 0 si es libre y la variable <strong>Espacio_L</strong> también tiene dos subniveles pues el subnivel distante tampoco aparece, por ello la codificamos como 1 si la variable <strong>Espacio_L</strong> es cerca y 0 si es atestado.</p>
<p>Tras realizar las codificaciones de los datos, vemos que nuestros nuevos datos tiene la siguiente forma y la dimensión de la matriz de datos ha cambiado.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="preprocesado-de-datos..html#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co">#6 primeras observaciones de los datos ya codificados</span></span>
<span id="cb11-2"><a href="preprocesado-de-datos..html#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(setas)</span></code></pre></div>
<pre><code>##   Letalidad Campana Cónica Convexa Plana Nudosa Hundida Fibroso Surcos Escamoso
## 1         1       0      0       1     0      0       0       0      0        0
## 2         0       0      0       1     0      0       0       0      0        0
## 3         0       1      0       0     0      0       0       0      0        0
## 4         1       0      0       1     0      0       0       0      0        1
## 5         0       0      0       1     0      0       0       0      0        0
## 6         0       0      0       1     0      0       0       0      0        1
##   Liso S_Marrón S_Ante S_Canela S_Gris S_Verde S_Rosa S_Morado S_Rojo S_Blanco
## 1    1        1      0        0      0       0      0        0      0        0
## 2    1        0      0        0      0       0      0        0      0        0
## 3    1        0      0        0      0       0      0        0      0        1
## 4    0        0      0        0      0       0      0        0      0        1
## 5    1        0      0        0      1       0      0        0      0        0
## 6    0        0      0        0      0       0      0        0      0        0
##   S_Amarillo Escamas O_almendra O_anís O_creosota O_pescado O_asqueroso
## 1          0       1          0      0          0         0           0
## 2          1       1          1      0          0         0           0
## 3          0       1          0      1          0         0           0
## 4          0       1          0      0          0         0           0
## 5          0       0          0      0          0         0           0
## 6          1       1          1      0          0         0           0
##   O_mohoso O_ninguno O_acre O_picante Adjunto/Libre Cerca/Atestado
## 1        0         0      1         0             0              1
## 2        0         0      0         0             0              1
## 3        0         0      0         0             0              1
## 4        0         0      1         0             0              1
## 5        0         1      0         0             0              0
## 6        0         0      0         0             0              1
##   Ancho/Estrecho L_Negro L_Marrón L_Canela L_Chocolate L_Gris L_Verde L_Naranja
## 1              0       1        0        0           0      0       0         0
## 2              1       1        0        0           0      0       0         0
## 3              1       0        1        0           0      0       0         0
## 4              0       0        1        0           0      0       0         0
## 5              1       1        0        0           0      0       0         0
## 6              1       0        1        0           0      0       0         0
##   L_Rosa L_Morado L_Rojo L_Blanco L_Amarillo Agrandado/Afilado TR_bulboso
## 1      0        0      0        0          0                 1          0
## 2      0        0      0        0          0                 1          0
## 3      0        0      0        0          0                 1          0
## 4      0        0      0        0          0                 1          0
## 5      0        0      0        0          0                 0          0
## 6      0        0      0        0          0                 1          0
##   TR_club TR_copa TR_igual TR_rizomorfos TR_enraizado TR_faltante ST1_Fibroso
## 1       0       0        1             0            0           0           0
## 2       1       0        0             0            0           0           0
## 3       1       0        0             0            0           0           0
## 4       0       0        1             0            0           0           0
## 5       0       0        1             0            0           0           0
## 6       1       0        0             0            0           0           0
##   ST1_Escamoso ST1_Sedoso ST1_Liso ST2_Fibroso ST2_Escamoso ST2_Sedoso ST2_Liso
## 1            0          0        1           0            0          0        1
## 2            0          0        1           0            0          0        1
## 3            0          0        1           0            0          0        1
## 4            0          0        1           0            0          0        1
## 5            0          0        1           0            0          0        1
## 6            0          0        1           0            0          0        1
##   CT1_marron CT1_ante CT1_canela CT1_gris CT1_naranja CT1_rosa CT1_rojo
## 1          0        0          0        0           0        0        0
## 2          0        0          0        0           0        0        0
## 3          0        0          0        0           0        0        0
## 4          0        0          0        0           0        0        0
## 5          0        0          0        0           0        0        0
## 6          0        0          0        0           0        0        0
##   CT1_blanco CT1_amarillo CT2_marron CT2_ante CT2_canela CT2_gris CT2_naranja
## 1          1            0          0        0          0        0           0
## 2          1            0          0        0          0        0           0
## 3          1            0          0        0          0        0           0
## 4          1            0          0        0          0        0           0
## 5          1            0          0        0          0        0           0
## 6          1            0          0        0          0        0           0
##   CT2_rosa CT2_rojo CT2_blanco CT2_amarillo V_Marrón V_Naranja V_Blanco
## 1        0        0          1            0        0         0        1
## 2        0        0          1            0        0         0        1
## 3        0        0          1            0        0         0        1
## 4        0        0          1            0        0         0        1
## 5        0        0          1            0        0         0        1
## 6        0        0          1            0        0         0        1
##   V_Amarillo NA_0 NA_1 NA_2 TA_Telaraña TA_Evanescente TA_Abocinado TA_Grande
## 1          0    0    1    0           0              0            0         0
## 2          0    0    1    0           0              0            0         0
## 3          0    0    1    0           0              0            0         0
## 4          0    0    1    0           0              0            0         0
## 5          0    0    1    0           0              1            0         0
## 6          0    0    1    0           0              0            0         0
##   TA_Ninguno TA_Colgante TA_Revestimiento TA_Zona CE_negro CE_marron CE_ante
## 1          0           1                0       0        1         0       0
## 2          0           1                0       0        0         1       0
## 3          0           1                0       0        0         1       0
## 4          0           1                0       0        1         0       0
## 5          0           0                0       0        0         1       0
## 6          0           1                0       0        1         0       0
##   CE_chocolate CE_verde CE_naranja CE_morado CE_blanco CE_amarillo Abundante
## 1            0        0          0         0         0           0         0
## 2            0        0          0         0         0           0         0
## 3            0        0          0         0         0           0         0
## 4            0        0          0         0         0           0         0
## 5            0        0          0         0         0           0         1
## 6            0        0          0         0         0           0         0
##   Agrupada Numerosa Dispersa Varias Solitaria Bosques Pastos Hojas Prados
## 1        0        0        1      0         0       0      0     0      0
## 2        0        1        0      0         0       0      1     0      0
## 3        0        1        0      0         0       0      0     0      1
## 4        0        0        1      0         0       0      0     0      0
## 5        0        0        0      0         0       0      1     0      0
## 6        0        1        0      0         0       0      1     0      0
##   Caminos Urbano Desechos
## 1       0      1        0
## 2       0      0        0
## 3       0      0        0
## 4       0      1        0
## 5       0      0        0
## 6       0      0        0</code></pre>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="preprocesado-de-datos..html#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Dimensión</span></span>
<span id="cb13-2"><a href="preprocesado-de-datos..html#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(setas)</span></code></pre></div>
<pre><code>## [1] 8124  117</code></pre>
<div id="particiones." class="section level2" number="4.1">
<h2><span class="header-section-number">4.1</span> Particiones.</h2>
<p>Repartimos nuestros datos de forma que tengamos un conjunto de datos para entrenamiento de los modelos, otro para testear los modelos ajustados mediante los datos de entrenamiento y otro para validación. Asignamos un 60% para entrenamiento y un 20% respectivamente para test y validación.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="preprocesado-de-datos..html#cb15-1" aria-hidden="true" tabindex="-1"></a>n_totales<span class="ot">=</span><span class="fu">dim</span>(setas)[<span class="dv">1</span>]</span>
<span id="cb15-2"><a href="preprocesado-de-datos..html#cb15-2" aria-hidden="true" tabindex="-1"></a>n_train<span class="ot">=</span><span class="fu">floor</span>(n_totales<span class="sc">*</span><span class="fl">0.6</span>) </span>
<span id="cb15-3"><a href="preprocesado-de-datos..html#cb15-3" aria-hidden="true" tabindex="-1"></a>n_test<span class="ot">=</span><span class="fu">floor</span>(n_totales<span class="sc">*</span><span class="fl">0.2</span>) </span>
<span id="cb15-4"><a href="preprocesado-de-datos..html#cb15-4" aria-hidden="true" tabindex="-1"></a>n_validacion<span class="ot">=</span>n_totales<span class="sc">-</span>n_train<span class="sc">-</span>n_test</span>
<span id="cb15-5"><a href="preprocesado-de-datos..html#cb15-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-6"><a href="preprocesado-de-datos..html#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">34735</span>)</span>
<span id="cb15-7"><a href="preprocesado-de-datos..html#cb15-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-8"><a href="preprocesado-de-datos..html#cb15-8" aria-hidden="true" tabindex="-1"></a>indices_totales<span class="ot">=</span><span class="fu">seq</span>(<span class="dv">1</span><span class="sc">:</span>n_totales)</span>
<span id="cb15-9"><a href="preprocesado-de-datos..html#cb15-9" aria-hidden="true" tabindex="-1"></a>indices_train<span class="ot">=</span><span class="fu">sort</span>(<span class="fu">sample</span>(indices_totales,n_train))</span>
<span id="cb15-10"><a href="preprocesado-de-datos..html#cb15-10" aria-hidden="true" tabindex="-1"></a>indices_test<span class="ot">=</span><span class="fu">sort</span>(<span class="fu">sample</span>(indices_totales[<span class="sc">-</span>indices_train],n_test))</span>
<span id="cb15-11"><a href="preprocesado-de-datos..html#cb15-11" aria-hidden="true" tabindex="-1"></a>indices_validacion<span class="ot">=</span>indices_totales[<span class="sc">-</span><span class="fu">c</span>(indices_train,indices_test)]</span>
<span id="cb15-12"><a href="preprocesado-de-datos..html#cb15-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-13"><a href="preprocesado-de-datos..html#cb15-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-14"><a href="preprocesado-de-datos..html#cb15-14" aria-hidden="true" tabindex="-1"></a>setas_train<span class="ot">=</span>setas[indices_train,]</span>
<span id="cb15-15"><a href="preprocesado-de-datos..html#cb15-15" aria-hidden="true" tabindex="-1"></a>setas_test<span class="ot">=</span>setas[indices_test,]</span>
<span id="cb15-16"><a href="preprocesado-de-datos..html#cb15-16" aria-hidden="true" tabindex="-1"></a>setas_validacion<span class="ot">=</span>setas[indices_validacion,]</span></code></pre></div>
</div>
<div id="eda.-exploratory-data-analysis." class="section level2" number="4.2">
<h2><span class="header-section-number">4.2</span> EDA. Exploratory Data Analysis.</h2>
<div id="letalidad" class="section level3" number="4.2.1">
<h3><span class="header-section-number">4.2.1</span> Letalidad:</h3>
<p>La variable <strong>Letalidad</strong> tiene dos niveles distintos, venenosa (p) o comestible (e), la frecuencia relativa correspondiente a nuestros datos es:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="preprocesado-de-datos..html#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Tabla:</span></span>
<span id="cb16-2"><a href="preprocesado-de-datos..html#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(setas<span class="sc">$</span>Letalidad)</span></code></pre></div>
<pre><code>## 
##    0    1 
## 4208 3916</code></pre>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="preprocesado-de-datos..html#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Tabla de frecuencias:</span></span>
<span id="cb18-2"><a href="preprocesado-de-datos..html#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="fu">prop.table</span>(<span class="fu">table</span>(setas<span class="sc">$</span>Letalidad))</span></code></pre></div>
<pre><code>## 
##         0         1 
## 0.5179714 0.4820286</code></pre>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="preprocesado-de-datos..html#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Gráfico</span></span>
<span id="cb20-2"><a href="preprocesado-de-datos..html#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="fu">barplot</span>(<span class="fu">table</span>(setas<span class="sc">$</span>Letalidad),<span class="at">main=</span><span class="st">&quot;Letalidad&quot;</span>,<span class="at">ylab=</span><span class="st">&quot;Número de setas&quot;</span>,<span class="at">col=</span><span class="fu">c</span>(<span class="st">&quot;blue&quot;</span>,<span class="st">&quot;magenta&quot;</span>),<span class="at">names.arg=</span><span class="fu">c</span>(<span class="st">&quot;Comestible&quot;</span>,<span class="st">&quot;Venenosa&quot;</span>))</span></code></pre></div>
<p><img src="MEMORIA_files/figure-html/proporcion-1.png" width="672" /></p>
<p>Los datos se reparten aproximademente a partes iguales entre los dos niveles, esto nos indica que la muestra está equilibrada.</p>
</div>
</div>
<div id="correlación-entre-las-variables." class="section level2" number="4.3">
<h2><span class="header-section-number">4.3</span> Correlación entre las variables.</h2>
<p>Vamos a comprobar si existe alguna correlación entre las distintas variables.</p>
<div id="forma-del-sombrero-forma_s" class="section level3" number="4.3.1">
<h3><span class="header-section-number">4.3.1</span> Forma del sombrero (Forma_S)</h3>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="preprocesado-de-datos..html#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Tabla de frecuencias letalidad~forma del sombrero</span></span>
<span id="cb21-2"><a href="preprocesado-de-datos..html#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(datos.setas<span class="sc">$</span>Letalidad,datos.setas<span class="sc">$</span>Forma_S)</span></code></pre></div>
<pre><code>##    
##        b    c    f    k    s    x
##   e  404    0 1596  228   32 1948
##   p   48    4 1556  600    0 1708</code></pre>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="preprocesado-de-datos..html#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Gráfico letalidad~forma del sombrero</span></span>
<span id="cb23-2"><a href="preprocesado-de-datos..html#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="fu">barplot</span>(<span class="fu">table</span>(datos.setas<span class="sc">$</span>Letalidad,datos.setas<span class="sc">$</span>Forma_S),<span class="at">main=</span><span class="st">&quot;Letalidad vs Forma del sombrero&quot;</span>,<span class="at">xlab=</span><span class="st">&quot;Forma&quot;</span>,<span class="at">ylab=</span><span class="st">&quot;Número de setas&quot;</span>,<span class="at">names.arg=</span><span class="fu">c</span>(<span class="st">&quot;Campana&quot;</span>, <span class="st">&quot;Cónica&quot;</span>, <span class="st">&quot;Plana&quot;</span>, <span class="st">&quot;Nudosa&quot;</span>, <span class="st">&quot;Hundida&quot;</span>, <span class="st">&quot;Convexa&quot;</span>),<span class="at">col=</span><span class="fu">c</span>(<span class="st">&quot;blue&quot;</span>,<span class="st">&quot;magenta&quot;</span>))</span></code></pre></div>
<p><img src="MEMORIA_files/figure-html/forma%20del%20sombrero-1.png" width="672" /></p>
</div>
<div id="cutícula" class="section level3" number="4.3.2">
<h3><span class="header-section-number">4.3.2</span> Cutícula</h3>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="preprocesado-de-datos..html#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Tabla de frecuencias letalidad~cutícula</span></span>
<span id="cb24-2"><a href="preprocesado-de-datos..html#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(datos.setas<span class="sc">$</span>Letalidad,datos.setas<span class="sc">$</span>Cuticula)</span></code></pre></div>
<pre><code>##    
##        f    g    s    y
##   e 1560    0 1144 1504
##   p  760    4 1412 1740</code></pre>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="preprocesado-de-datos..html#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Gráfico letalidad~cuticula</span></span>
<span id="cb26-2"><a href="preprocesado-de-datos..html#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="fu">barplot</span>(<span class="fu">table</span>(datos.setas<span class="sc">$</span>Letalidad,datos.setas<span class="sc">$</span>Cuticula),<span class="at">main=</span><span class="st">&quot;Letalidad vs Cuticula&quot;</span>,<span class="at">xlab=</span><span class="st">&quot;Cuticula&quot;</span>,<span class="at">ylab=</span><span class="st">&quot;Número de setas&quot;</span>,<span class="at">names.arg=</span><span class="fu">c</span>(<span class="st">&quot;Fibroso&quot;</span>, <span class="st">&quot;Con surcos&quot;</span>, <span class="st">&quot;Lisa&quot;</span>, <span class="st">&quot;Escamosa&quot;</span>),<span class="at">col=</span><span class="fu">c</span>(<span class="st">&quot;blue&quot;</span>,<span class="st">&quot;magenta&quot;</span>))</span></code></pre></div>
<p><img src="MEMORIA_files/figure-html/cuticula-1.png" width="672" /></p>
</div>
<div id="color-del-sombrero-color_s" class="section level3" number="4.3.3">
<h3><span class="header-section-number">4.3.3</span> Color del sombrero (Color_S)</h3>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="preprocesado-de-datos..html#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Tabla de frecuencias letalidad~color del sombrero</span></span>
<span id="cb27-2"><a href="preprocesado-de-datos..html#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(datos.setas<span class="sc">$</span>Letalidad,datos.setas<span class="sc">$</span>Color_S)</span></code></pre></div>
<pre><code>##    
##        b    c    e    g    n    p    r    u    w    y
##   e   48   32  624 1032 1264   56   16   16  720  400
##   p  120   12  876  808 1020   88    0    0  320  672</code></pre>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="preprocesado-de-datos..html#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Gráfico letalidad~color del sombrero</span></span>
<span id="cb29-2"><a href="preprocesado-de-datos..html#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="fu">barplot</span>(<span class="fu">table</span>(datos.setas<span class="sc">$</span>Letalidad,datos.setas<span class="sc">$</span>Color_S),<span class="at">main=</span><span class="st">&quot;Letalidad vs Color del sombrero&quot;</span>,<span class="at">xlab=</span><span class="st">&quot;Color&quot;</span>,<span class="at">ylab=</span><span class="st">&quot;Número de setas&quot;</span>,<span class="at">names.arg=</span><span class="fu">c</span>(<span class="st">&quot;Ante&quot;</span>, <span class="st">&quot;Canela&quot;</span>, <span class="st">&quot;Rojo&quot;</span>, <span class="st">&quot;Gris&quot;</span>,<span class="st">&quot;Marrón&quot;</span>,<span class="st">&quot;Rosa&quot;</span>,<span class="st">&quot;Verde&quot;</span>,<span class="st">&quot;Morado&quot;</span>,<span class="st">&quot;Blanco&quot;</span>,<span class="st">&quot;Amarillo&quot;</span>),<span class="at">col=</span><span class="fu">c</span>(<span class="st">&quot;blue&quot;</span>,<span class="st">&quot;magenta&quot;</span>))</span></code></pre></div>
<p><img src="MEMORIA_files/figure-html/color%20del%20sombrero-1.png" width="672" /></p>
</div>
<div id="escamas" class="section level3" number="4.3.4">
<h3><span class="header-section-number">4.3.4</span> Escamas</h3>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="preprocesado-de-datos..html#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Tabla de frecuencias letalidad~escamas</span></span>
<span id="cb30-2"><a href="preprocesado-de-datos..html#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(datos.setas<span class="sc">$</span>Letalidad,datos.setas<span class="sc">$</span>Escamas)</span></code></pre></div>
<pre><code>##    
##        f    t
##   e 1456 2752
##   p 3292  624</code></pre>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="preprocesado-de-datos..html#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Gráfico letalidad~escamas</span></span>
<span id="cb32-2"><a href="preprocesado-de-datos..html#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="fu">barplot</span>(<span class="fu">table</span>(datos.setas<span class="sc">$</span>Letalidad,datos.setas<span class="sc">$</span>Escamas),<span class="at">main=</span><span class="st">&quot;Letalidad vs Escamas&quot;</span>,<span class="at">xlab=</span><span class="st">&quot;Escamas&quot;</span>,<span class="at">ylab=</span><span class="st">&quot;Número de setas&quot;</span>,<span class="at">names.arg=</span><span class="fu">c</span>(<span class="st">&quot;Sin escamas&quot;</span>, <span class="st">&quot;Con escamas&quot;</span>),<span class="at">col=</span><span class="fu">c</span>(<span class="st">&quot;blue&quot;</span>,<span class="st">&quot;magenta&quot;</span>))</span></code></pre></div>
<p><img src="MEMORIA_files/figure-html/escamas-1.png" width="672" /></p>
</div>
<div id="olor" class="section level3" number="4.3.5">
<h3><span class="header-section-number">4.3.5</span> Olor</h3>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="preprocesado-de-datos..html#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Tabla de frecuencias letalidad~olor</span></span>
<span id="cb33-2"><a href="preprocesado-de-datos..html#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(datos.setas<span class="sc">$</span>Letalidad,datos.setas<span class="sc">$</span>Olor)</span></code></pre></div>
<pre><code>##    
##        a    c    f    l    m    n    p    s    y
##   e  400    0    0  400    0 3408    0    0    0
##   p    0  192 2160    0   36  120  256  576  576</code></pre>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="preprocesado-de-datos..html#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Gráfico letalidad~olor</span></span>
<span id="cb35-2"><a href="preprocesado-de-datos..html#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="fu">barplot</span>(<span class="fu">table</span>(datos.setas<span class="sc">$</span>Letalidad,datos.setas<span class="sc">$</span>Olor),<span class="at">main=</span><span class="st">&quot;Letalidad vs Olor&quot;</span>,<span class="at">xlab=</span><span class="st">&quot;Olor&quot;</span>,<span class="at">ylab=</span><span class="st">&quot;Número de setas&quot;</span>,<span class="at">names.arg=</span><span class="fu">c</span>(<span class="st">&quot;Almendra&quot;</span>, <span class="st">&quot;Creosota&quot;</span>,<span class="st">&quot;Asqueroso&quot;</span>,<span class="st">&quot;Anís&quot;</span>,<span class="st">&quot;Mohoso&quot;</span>,<span class="st">&quot;Ninguno&quot;</span>,<span class="st">&quot;Acre&quot;</span>,<span class="st">&quot;Picante&quot;</span>,<span class="st">&quot;Pescado&quot;</span>),<span class="at">col=</span><span class="fu">c</span>(<span class="st">&quot;blue&quot;</span>,<span class="st">&quot;magenta&quot;</span>))</span></code></pre></div>
<p><img src="MEMORIA_files/figure-html/olor%20setas-1.png" width="672" /></p>
<p>Podemos observar que la variable <strong>Olor</strong> se distribuye entre los distintos tipos de olor de forma exclusiva, es decir, todas las setas que presentan un olor del tipo <em>creosota, asqueroso, mohoso, acre, picante o pescado</em> son venenosas mientras que si presentan un olor del tipo <em>almendra, anís </em> son comestibles, mientras que si es <em>ninguno</em> el olor tienes una proporción de 96.6% de que sea comestible.</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="preprocesado-de-datos..html#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Proporción según olor sea ninguno</span></span>
<span id="cb36-2"><a href="preprocesado-de-datos..html#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="fu">prop.table</span>(<span class="fu">table</span>(datos.setas<span class="sc">$</span>Letalidad,datos.setas<span class="sc">$</span>Olor)[,<span class="dv">6</span>])<span class="sc">*</span><span class="dv">100</span></span></code></pre></div>
<pre><code>##         e         p 
## 96.598639  3.401361</code></pre>
<p>Entonces podríamos cambiar la codificación hecha anteriormente y tener solo una variable codificada de forma binaria de tal forma que para los olores que producen que la seta sea venenosa darles el valor 1 y para los que no, darles el valor 0.</p>
</div>
<div id="fijación-de-las-láminas-fijacion_l" class="section level3" number="4.3.6">
<h3><span class="header-section-number">4.3.6</span> Fijación de las láminas (Fijacion_L)</h3>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="preprocesado-de-datos..html#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Tabla de frecuencias letalidad~fijación de las láminas</span></span>
<span id="cb38-2"><a href="preprocesado-de-datos..html#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(datos.setas<span class="sc">$</span>Letalidad,datos.setas<span class="sc">$</span>Fijacion_L)</span></code></pre></div>
<pre><code>##    
##        a    f
##   e  192 4016
##   p   18 3898</code></pre>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="preprocesado-de-datos..html#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Gráfico letalidad~fijación de las láminas</span></span>
<span id="cb40-2"><a href="preprocesado-de-datos..html#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="fu">barplot</span>(<span class="fu">table</span>(datos.setas<span class="sc">$</span>Letalidad,datos.setas<span class="sc">$</span>Fijacion_L),<span class="at">main=</span><span class="st">&quot;Letalidad vs Fijación de las láminas&quot;</span>,<span class="at">xlab=</span><span class="st">&quot;Fijación&quot;</span>,<span class="at">ylab=</span><span class="st">&quot;Número de setas&quot;</span>,<span class="at">names.arg=</span><span class="fu">c</span>(<span class="st">&quot;Adjunto&quot;</span>, <span class="st">&quot;Libre&quot;</span>),<span class="at">col=</span><span class="fu">c</span>(<span class="st">&quot;blue&quot;</span>,<span class="st">&quot;magenta&quot;</span>))</span></code></pre></div>
<p><img src="MEMORIA_files/figure-html/fijacion-1.png" width="672" /></p>
<p>Podemos ver que la proporción de que la seta sea venenosa o comestible según la fijación de las láminas en el caso de que estén libre es casi del 50% mientras que si están adjuntas la proporción cambia a un 91.4% frente a un 8.6%, comestible o venenosa, respectivamente.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="preprocesado-de-datos..html#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Proporción según fijación sea adjunto</span></span>
<span id="cb41-2"><a href="preprocesado-de-datos..html#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="fu">prop.table</span>(<span class="fu">table</span>(datos.setas<span class="sc">$</span>Letalidad,datos.setas<span class="sc">$</span>Fijacion_L)[,<span class="dv">1</span>])<span class="sc">*</span><span class="dv">100</span></span></code></pre></div>
<pre><code>##         e         p 
## 91.428571  8.571429</code></pre>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="preprocesado-de-datos..html#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Proporción según fijación sea libre</span></span>
<span id="cb43-2"><a href="preprocesado-de-datos..html#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="fu">prop.table</span>(<span class="fu">table</span>(datos.setas<span class="sc">$</span>Letalidad,datos.setas<span class="sc">$</span>Fijacion_L)[,<span class="dv">2</span>])<span class="sc">*</span><span class="dv">100</span></span></code></pre></div>
<pre><code>##        e        p 
## 50.74551 49.25449</code></pre>
</div>
<div id="espacio-entre-láminas-espacio_l" class="section level3" number="4.3.7">
<h3><span class="header-section-number">4.3.7</span> Espacio entre láminas (Espacio_L)</h3>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="preprocesado-de-datos..html#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Tabla de frecuencias letalidad~espacio entre láminas</span></span>
<span id="cb45-2"><a href="preprocesado-de-datos..html#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(datos.setas<span class="sc">$</span>Letalidad,datos.setas<span class="sc">$</span>Espacio_L)</span></code></pre></div>
<pre><code>##    
##        c    w
##   e 3008 1200
##   p 3804  112</code></pre>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="preprocesado-de-datos..html#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Gráfico letalidad~espacio entre láminas</span></span>
<span id="cb47-2"><a href="preprocesado-de-datos..html#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="fu">barplot</span>(<span class="fu">table</span>(datos.setas<span class="sc">$</span>Letalidad,datos.setas<span class="sc">$</span>Espacio_L),<span class="at">main=</span><span class="st">&quot;Letalidad vs Espacio entre láminas&quot;</span>,<span class="at">xlab=</span><span class="st">&quot;Espacio&quot;</span>,<span class="at">ylab=</span><span class="st">&quot;Número de setas&quot;</span>,<span class="at">names.arg=</span><span class="fu">c</span>(<span class="st">&quot;Cerca&quot;</span>, <span class="st">&quot;Atestado&quot;</span>),<span class="at">col=</span><span class="fu">c</span>(<span class="st">&quot;blue&quot;</span>,<span class="st">&quot;magenta&quot;</span>))</span></code></pre></div>
<p><img src="MEMORIA_files/figure-html/espacio-1.png" width="672" /></p>
<p>Podemos ver que ocurre algo parecido que en la variable <strong>Fijacion_L</strong>, la proporción de que la seta sea venenosa o comestible según el espacio entre las láminas en el caso de que estén cerca es casi del 50% mientras que si están atestado la proporción cambia a un 91.5% frente a un 8.5%, comestible o venenosa, respectivamente.</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="preprocesado-de-datos..html#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Proporción según espacio sea cerca</span></span>
<span id="cb48-2"><a href="preprocesado-de-datos..html#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="fu">prop.table</span>(<span class="fu">table</span>(datos.setas<span class="sc">$</span>Letalidad,datos.setas<span class="sc">$</span>Espacio_L)[,<span class="dv">1</span>])<span class="sc">*</span><span class="dv">100</span></span></code></pre></div>
<pre><code>##        e        p 
## 44.15737 55.84263</code></pre>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="preprocesado-de-datos..html#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Proporción según espacio sea atestado</span></span>
<span id="cb50-2"><a href="preprocesado-de-datos..html#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="fu">prop.table</span>(<span class="fu">table</span>(datos.setas<span class="sc">$</span>Letalidad,datos.setas<span class="sc">$</span>Espacio_L)[,<span class="dv">2</span>])<span class="sc">*</span><span class="dv">100</span></span></code></pre></div>
<pre><code>##         e         p 
## 91.463415  8.536585</code></pre>
</div>
<div id="tamaño-de-las-láminas-tamaño_l" class="section level3" number="4.3.8">
<h3><span class="header-section-number">4.3.8</span> Tamaño de las láminas (Tamaño_L)</h3>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="preprocesado-de-datos..html#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Tabla de frecuencias letalidad~tamaño de las láminas</span></span>
<span id="cb52-2"><a href="preprocesado-de-datos..html#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(datos.setas<span class="sc">$</span>Letalidad,datos.setas<span class="sc">$</span>Tamaño_L)</span></code></pre></div>
<pre><code>##    
##        b    n
##   e 3920  288
##   p 1692 2224</code></pre>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="preprocesado-de-datos..html#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Gráfico letalidad~tamaño de las láminas</span></span>
<span id="cb54-2"><a href="preprocesado-de-datos..html#cb54-2" aria-hidden="true" tabindex="-1"></a><span class="fu">barplot</span>(<span class="fu">table</span>(datos.setas<span class="sc">$</span>Letalidad,datos.setas<span class="sc">$</span>Tamaño_L),<span class="at">main=</span><span class="st">&quot;Letalidad vs Tamaño de las láminas&quot;</span>,<span class="at">xlab=</span><span class="st">&quot;Tamaño&quot;</span>,<span class="at">ylab=</span><span class="st">&quot;Número de setas&quot;</span>,<span class="at">names.arg=</span><span class="fu">c</span>(<span class="st">&quot;Ancho&quot;</span>, <span class="st">&quot;Estrecho&quot;</span>),<span class="at">col=</span><span class="fu">c</span>(<span class="st">&quot;blue&quot;</span>,<span class="st">&quot;magenta&quot;</span>))</span></code></pre></div>
<p><img src="MEMORIA_files/figure-html/tamaño-1.png" width="672" /></p>
<p>Podemos ver que la proporción de que la seta sea venenosa o comestible según el tamaño de las láminas en el caso de que sea ancha es del 30% frente a 70%, respectivamente, mientras que si es estrecho la proporción cambia a un 11.5% frente a un 88.5%, respectivamente.</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="preprocesado-de-datos..html#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Proporción según tamaño sea ancho</span></span>
<span id="cb55-2"><a href="preprocesado-de-datos..html#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="fu">prop.table</span>(<span class="fu">table</span>(datos.setas<span class="sc">$</span>Letalidad,datos.setas<span class="sc">$</span>Tamaño_L)[,<span class="dv">1</span>])<span class="sc">*</span><span class="dv">100</span></span></code></pre></div>
<pre><code>##        e        p 
## 69.85032 30.14968</code></pre>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="preprocesado-de-datos..html#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Proporción según tamaño sea estrecho</span></span>
<span id="cb57-2"><a href="preprocesado-de-datos..html#cb57-2" aria-hidden="true" tabindex="-1"></a><span class="fu">prop.table</span>(<span class="fu">table</span>(datos.setas<span class="sc">$</span>Letalidad,datos.setas<span class="sc">$</span>Tamaño_L)[,<span class="dv">2</span>])<span class="sc">*</span><span class="dv">100</span></span></code></pre></div>
<pre><code>##        e        p 
## 11.46497 88.53503</code></pre>
</div>
<div id="color-de-las-láminas-color_l" class="section level3" number="4.3.9">
<h3><span class="header-section-number">4.3.9</span> Color de las láminas (Color_L)</h3>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="preprocesado-de-datos..html#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Tabla de frecuencias letalidad~color de las láminas</span></span>
<span id="cb59-2"><a href="preprocesado-de-datos..html#cb59-2" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(datos.setas<span class="sc">$</span>Letalidad,datos.setas<span class="sc">$</span>Color_L)</span></code></pre></div>
<pre><code>##    
##        b    e    g    h    k    n    o    p    r    u    w    y
##   e    0   96  248  204  344  936   64  852    0  444  956   64
##   p 1728    0  504  528   64  112    0  640   24   48  246   22</code></pre>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="preprocesado-de-datos..html#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Gráfico letalidad~color de las láminas</span></span>
<span id="cb61-2"><a href="preprocesado-de-datos..html#cb61-2" aria-hidden="true" tabindex="-1"></a><span class="fu">barplot</span>(<span class="fu">table</span>(datos.setas<span class="sc">$</span>Letalidad,datos.setas<span class="sc">$</span>Color_L),<span class="at">main=</span><span class="st">&quot;Letalidad vs Color de las láminas&quot;</span>,<span class="at">xlab=</span><span class="st">&quot;Color&quot;</span>,<span class="at">ylab=</span><span class="st">&quot;Número de setas&quot;</span>,<span class="at">names.arg=</span><span class="fu">c</span>(<span class="st">&quot;Ante&quot;</span>, <span class="st">&quot;Rojo&quot;</span>,<span class="st">&quot;Gris&quot;</span>,<span class="st">&quot;Chocolate&quot;</span>,<span class="st">&quot;Negro&quot;</span>,<span class="st">&quot;Marrón&quot;</span>,<span class="st">&quot;Naranja&quot;</span>,<span class="st">&quot;Rosa&quot;</span>,<span class="st">&quot;Verde&quot;</span>,<span class="st">&quot;Morado&quot;</span>,<span class="st">&quot;Blanco&quot;</span>,<span class="st">&quot;Amarillo&quot;</span>),<span class="at">col=</span><span class="fu">c</span>(<span class="st">&quot;blue&quot;</span>,<span class="st">&quot;magenta&quot;</span>))</span></code></pre></div>
<p><img src="MEMORIA_files/figure-html/color%20laminas-1.png" width="672" /></p>
</div>
<div id="forma-del-tallo-forma_t" class="section level3" number="4.3.10">
<h3><span class="header-section-number">4.3.10</span> Forma del tallo (Forma_T)</h3>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="preprocesado-de-datos..html#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Tabla de frecuencias letalidad~forma del tallo</span></span>
<span id="cb62-2"><a href="preprocesado-de-datos..html#cb62-2" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(datos.setas<span class="sc">$</span>Letalidad,datos.setas<span class="sc">$</span>Forma_T)</span></code></pre></div>
<pre><code>##    
##        e    t
##   e 1616 2592
##   p 1900 2016</code></pre>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="preprocesado-de-datos..html#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Gráfico letalidad~forma del tallo</span></span>
<span id="cb64-2"><a href="preprocesado-de-datos..html#cb64-2" aria-hidden="true" tabindex="-1"></a><span class="fu">barplot</span>(<span class="fu">table</span>(datos.setas<span class="sc">$</span>Letalidad,datos.setas<span class="sc">$</span>Forma_T),<span class="at">main=</span><span class="st">&quot;Letalidad vs Forma del tallo&quot;</span>,<span class="at">xlab=</span><span class="st">&quot;Tallo&quot;</span>,<span class="at">ylab=</span><span class="st">&quot;Número de setas&quot;</span>,<span class="at">names.arg=</span><span class="fu">c</span>(<span class="st">&quot;Agrandado&quot;</span>, <span class="st">&quot;Afilado&quot;</span>),<span class="at">col=</span><span class="fu">c</span>(<span class="st">&quot;blue&quot;</span>,<span class="st">&quot;magenta&quot;</span>))</span></code></pre></div>
<p><img src="MEMORIA_files/figure-html/forma%20tallo-1.png" width="672" /></p>
<p>Podemos ver que la proporción de que la seta sea venenosa o comestible según el forma del tallo es casi del 50% en ambos formas del tallo</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="preprocesado-de-datos..html#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Proporción según forma sea agrandado</span></span>
<span id="cb65-2"><a href="preprocesado-de-datos..html#cb65-2" aria-hidden="true" tabindex="-1"></a><span class="fu">prop.table</span>(<span class="fu">table</span>(datos.setas<span class="sc">$</span>Letalidad,datos.setas<span class="sc">$</span>Forma_T)[,<span class="dv">1</span>])<span class="sc">*</span><span class="dv">100</span></span></code></pre></div>
<pre><code>##        e        p 
## 45.96132 54.03868</code></pre>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="preprocesado-de-datos..html#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Proporción según forma sea afilado</span></span>
<span id="cb67-2"><a href="preprocesado-de-datos..html#cb67-2" aria-hidden="true" tabindex="-1"></a><span class="fu">prop.table</span>(<span class="fu">table</span>(datos.setas<span class="sc">$</span>Letalidad,datos.setas<span class="sc">$</span>Forma_T)[,<span class="dv">2</span>])<span class="sc">*</span><span class="dv">100</span></span></code></pre></div>
<pre><code>##     e     p 
## 56.25 43.75</code></pre>
</div>
<div id="tallo-raíz-tallo_raiz" class="section level3" number="4.3.11">
<h3><span class="header-section-number">4.3.11</span> Tallo-Raíz (Tallo_raiz)</h3>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="preprocesado-de-datos..html#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Tabla de frecuencias letalidad~tallo-raíz</span></span>
<span id="cb69-2"><a href="preprocesado-de-datos..html#cb69-2" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(datos.setas<span class="sc">$</span>Letalidad,datos.setas<span class="sc">$</span>Tallo_raiz)</span></code></pre></div>
<pre><code>##    
##        ?    b    c    e    r
##   e  720 1920  512  864  192
##   p 1760 1856   44  256    0</code></pre>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="preprocesado-de-datos..html#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Gráfico letalidad~tallo-raiz</span></span>
<span id="cb71-2"><a href="preprocesado-de-datos..html#cb71-2" aria-hidden="true" tabindex="-1"></a><span class="fu">barplot</span>(<span class="fu">table</span>(datos.setas<span class="sc">$</span>Letalidad,datos.setas<span class="sc">$</span>Tallo_raiz),<span class="at">main=</span><span class="st">&quot;Letalidad vs Tallo-Raiz&quot;</span>,<span class="at">xlab=</span><span class="st">&quot;Tallo-Raiz&quot;</span>,<span class="at">ylab=</span><span class="st">&quot;Número de setas&quot;</span>,<span class="at">names.arg=</span><span class="fu">c</span>(<span class="st">&quot;Faltante&quot;</span>, <span class="st">&quot;Bulboso&quot;</span>,<span class="st">&quot;Club&quot;</span>,<span class="st">&quot;Igual&quot;</span>,<span class="st">&quot;Enraizado&quot;</span>),<span class="at">col=</span><span class="fu">c</span>(<span class="st">&quot;blue&quot;</span>,<span class="st">&quot;magenta&quot;</span>))</span></code></pre></div>
<p><img src="MEMORIA_files/figure-html/tallo%20raiz-1.png" width="672" /></p>
</div>
<div id="superficie-del-tallo-por-encima-del-anillo-superficie_t1" class="section level3" number="4.3.12">
<h3><span class="header-section-number">4.3.12</span> Superficie del tallo por encima del anillo (Superficie_T1)</h3>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="preprocesado-de-datos..html#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Tabla de frecuencias letalidad~supercifie del tallo por encima del anillo</span></span>
<span id="cb72-2"><a href="preprocesado-de-datos..html#cb72-2" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(datos.setas<span class="sc">$</span>Letalidad,datos.setas<span class="sc">$</span>Superficie_T1)</span></code></pre></div>
<pre><code>##    
##        f    k    s    y
##   e  408  144 3640   16
##   p  144 2228 1536    8</code></pre>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="preprocesado-de-datos..html#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Gráfico letalidad~superficie del tallo por encima del anillo</span></span>
<span id="cb74-2"><a href="preprocesado-de-datos..html#cb74-2" aria-hidden="true" tabindex="-1"></a><span class="fu">barplot</span>(<span class="fu">table</span>(datos.setas<span class="sc">$</span>Letalidad,datos.setas<span class="sc">$</span>Superficie_T1),<span class="at">main=</span><span class="st">&quot;Letalidad vs Tallo por encima del anillo&quot;</span>,<span class="at">xlab=</span><span class="st">&quot;Superficie&quot;</span>,<span class="at">ylab=</span><span class="st">&quot;Número de setas&quot;</span>,<span class="at">names.arg=</span><span class="fu">c</span>(<span class="st">&quot;Fibroso&quot;</span>, <span class="st">&quot;Sedoso&quot;</span>,<span class="st">&quot;Liso&quot;</span>,<span class="st">&quot;Escamoso&quot;</span>),<span class="at">col=</span><span class="fu">c</span>(<span class="st">&quot;blue&quot;</span>,<span class="st">&quot;magenta&quot;</span>))</span></code></pre></div>
<p><img src="MEMORIA_files/figure-html/superficie%20t1-1.png" width="672" /></p>
</div>
<div id="superficie-del-tallo-por-debajo-del-anillo-superficie_t2" class="section level3" number="4.3.13">
<h3><span class="header-section-number">4.3.13</span> Superficie del tallo por debajo del anillo (Superficie_T2)</h3>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="preprocesado-de-datos..html#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Tabla de frecuencias letalidad~supercifie del tallo por debajo del anillo</span></span>
<span id="cb75-2"><a href="preprocesado-de-datos..html#cb75-2" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(datos.setas<span class="sc">$</span>Letalidad,datos.setas<span class="sc">$</span>Superficie_T2)</span></code></pre></div>
<pre><code>##    
##        f    k    s    y
##   e  456  144 3400  208
##   p  144 2160 1536   76</code></pre>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="preprocesado-de-datos..html#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Gráfico letalidad~superficie del tallo por debajo del anillo</span></span>
<span id="cb77-2"><a href="preprocesado-de-datos..html#cb77-2" aria-hidden="true" tabindex="-1"></a><span class="fu">barplot</span>(<span class="fu">table</span>(datos.setas<span class="sc">$</span>Letalidad,datos.setas<span class="sc">$</span>Superficie_T2),<span class="at">main=</span><span class="st">&quot;Letalidad vs Tallo por debajo del anillo&quot;</span>,<span class="at">xlab=</span><span class="st">&quot;Superficie&quot;</span>,<span class="at">ylab=</span><span class="st">&quot;Número de setas&quot;</span>,<span class="at">names.arg=</span><span class="fu">c</span>(<span class="st">&quot;Fibroso&quot;</span>, <span class="st">&quot;Sedoso&quot;</span>,<span class="st">&quot;Liso&quot;</span>,<span class="st">&quot;Escamoso&quot;</span>),<span class="at">col=</span><span class="fu">c</span>(<span class="st">&quot;blue&quot;</span>,<span class="st">&quot;magenta&quot;</span>))</span></code></pre></div>
<p><img src="MEMORIA_files/figure-html/superficie%20t2-1.png" width="672" /></p>
</div>
<div id="color-del-tallo-por-encima-del-anillo-color_t1" class="section level3" number="4.3.14">
<h3><span class="header-section-number">4.3.14</span> Color del tallo por encima del anillo (Color_T1)</h3>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="preprocesado-de-datos..html#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Tabla de frecuencias letalidad~color del tallo por encima del anillo</span></span>
<span id="cb78-2"><a href="preprocesado-de-datos..html#cb78-2" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(datos.setas<span class="sc">$</span>Letalidad,datos.setas<span class="sc">$</span>Color_T1)</span></code></pre></div>
<pre><code>##    
##        b    c    e    g    n    o    p    w    y
##   e    0    0   96  576   16  192  576 2752    0
##   p  432   36    0    0  432    0 1296 1712    8</code></pre>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="preprocesado-de-datos..html#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Gráfico letalidad~color del tallo por encima del anillo</span></span>
<span id="cb80-2"><a href="preprocesado-de-datos..html#cb80-2" aria-hidden="true" tabindex="-1"></a><span class="fu">barplot</span>(<span class="fu">table</span>(datos.setas<span class="sc">$</span>Letalidad,datos.setas<span class="sc">$</span>Color_T1),<span class="at">main=</span><span class="st">&quot;Letalidad vs Tallo por encima del anillos&quot;</span>,<span class="at">xlab=</span><span class="st">&quot;Color&quot;</span>,<span class="at">ylab=</span><span class="st">&quot;Número de setas&quot;</span>,<span class="at">names.arg=</span><span class="fu">c</span>(<span class="st">&quot;Ante&quot;</span>, <span class="st">&quot;Canela&quot;</span>,<span class="st">&quot;Rojo&quot;</span>,<span class="st">&quot;Gris&quot;</span>,<span class="st">&quot;Marrón&quot;</span>,<span class="st">&quot;Naranja&quot;</span>,<span class="st">&quot;Rosa&quot;</span>,<span class="st">&quot;Blanco&quot;</span>,<span class="st">&quot;Amarillo&quot;</span>),<span class="at">col=</span><span class="fu">c</span>(<span class="st">&quot;blue&quot;</span>,<span class="st">&quot;magenta&quot;</span>))</span></code></pre></div>
<p><img src="MEMORIA_files/figure-html/color%20t1-1.png" width="672" /></p>
</div>
<div id="color-del-tallo-por-debajo-del-anillo-color_t2" class="section level3" number="4.3.15">
<h3><span class="header-section-number">4.3.15</span> Color del tallo por debajo del anillo (Color_T2)</h3>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="preprocesado-de-datos..html#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Tabla de frecuencias letalidad~color del tallo por debajo del anillo</span></span>
<span id="cb81-2"><a href="preprocesado-de-datos..html#cb81-2" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(datos.setas<span class="sc">$</span>Letalidad,datos.setas<span class="sc">$</span>Color_T2)</span></code></pre></div>
<pre><code>##    
##        b    c    e    g    n    o    p    w    y
##   e    0    0   96  576   64  192  576 2704    0
##   p  432   36    0    0  448    0 1296 1680   24</code></pre>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="preprocesado-de-datos..html#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Gráfico letalidad~color del tallo por debajo del anillo</span></span>
<span id="cb83-2"><a href="preprocesado-de-datos..html#cb83-2" aria-hidden="true" tabindex="-1"></a><span class="fu">barplot</span>(<span class="fu">table</span>(datos.setas<span class="sc">$</span>Letalidad,datos.setas<span class="sc">$</span>Color_T2),<span class="at">main=</span><span class="st">&quot;Letalidad vs Tallo por debajo del anillos&quot;</span>,<span class="at">xlab=</span><span class="st">&quot;Color&quot;</span>,<span class="at">ylab=</span><span class="st">&quot;Número de setas&quot;</span>,<span class="at">names.arg=</span><span class="fu">c</span>(<span class="st">&quot;Ante&quot;</span>, <span class="st">&quot;Canela&quot;</span>,<span class="st">&quot;Rojo&quot;</span>,<span class="st">&quot;Gris&quot;</span>,<span class="st">&quot;Marrón&quot;</span>,<span class="st">&quot;Naranja&quot;</span>,<span class="st">&quot;Rosa&quot;</span>,<span class="st">&quot;Blanco&quot;</span>,<span class="st">&quot;Amarillo&quot;</span>),<span class="at">col=</span><span class="fu">c</span>(<span class="st">&quot;blue&quot;</span>,<span class="st">&quot;magenta&quot;</span>))</span></code></pre></div>
<p><img src="MEMORIA_files/figure-html/color%20t2-1.png" width="672" /></p>
</div>
<div id="color-del-volva-color_v" class="section level3" number="4.3.16">
<h3><span class="header-section-number">4.3.16</span> Color del volva (Color_V)</h3>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="preprocesado-de-datos..html#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Tabla de frecuencias letalidad~color del volva</span></span>
<span id="cb84-2"><a href="preprocesado-de-datos..html#cb84-2" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(datos.setas<span class="sc">$</span>Letalidad,datos.setas<span class="sc">$</span>Color_V)</span></code></pre></div>
<pre><code>##    
##        n    o    w    y
##   e   96   96 4016    0
##   p    0    0 3908    8</code></pre>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="preprocesado-de-datos..html#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Gráfico letalidad~color del volva</span></span>
<span id="cb86-2"><a href="preprocesado-de-datos..html#cb86-2" aria-hidden="true" tabindex="-1"></a><span class="fu">barplot</span>(<span class="fu">table</span>(datos.setas<span class="sc">$</span>Letalidad,datos.setas<span class="sc">$</span>Color_V),<span class="at">main=</span><span class="st">&quot;Letalidad vs Volva&quot;</span>,<span class="at">xlab=</span><span class="st">&quot;Color&quot;</span>,<span class="at">ylab=</span><span class="st">&quot;Número de setas&quot;</span>,<span class="at">names.arg=</span><span class="fu">c</span>(<span class="st">&quot;Marrón&quot;</span>, <span class="st">&quot;Naranja&quot;</span>,<span class="st">&quot;Blanco&quot;</span>,<span class="st">&quot;Amarillo&quot;</span>),<span class="at">col=</span><span class="fu">c</span>(<span class="st">&quot;blue&quot;</span>,<span class="st">&quot;magenta&quot;</span>))</span></code></pre></div>
<p><img src="MEMORIA_files/figure-html/color%20volva-1.png" width="672" /></p>
</div>
<div id="número-de-anillos-n_anillos" class="section level3" number="4.3.17">
<h3><span class="header-section-number">4.3.17</span> Número de anillos (N_anillos)</h3>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="preprocesado-de-datos..html#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Tabla de frecuencias letalidad~número de anillos</span></span>
<span id="cb87-2"><a href="preprocesado-de-datos..html#cb87-2" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(datos.setas<span class="sc">$</span>Letalidad,datos.setas<span class="sc">$</span>N_anillos)</span></code></pre></div>
<pre><code>##    
##        n    o    t
##   e    0 3680  528
##   p   36 3808   72</code></pre>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="preprocesado-de-datos..html#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Gráfico letalidad~numero de anillos</span></span>
<span id="cb89-2"><a href="preprocesado-de-datos..html#cb89-2" aria-hidden="true" tabindex="-1"></a><span class="fu">barplot</span>(<span class="fu">table</span>(datos.setas<span class="sc">$</span>Letalidad,datos.setas<span class="sc">$</span>N_anillos),<span class="at">main=</span><span class="st">&quot;Letalidad vs Anillos&quot;</span>,<span class="at">xlab=</span><span class="st">&quot;Número&quot;</span>,<span class="at">ylab=</span><span class="st">&quot;Número de setas&quot;</span>,<span class="at">names.arg=</span><span class="fu">c</span>(<span class="st">&quot;Ninguno&quot;</span>,<span class="st">&quot;Uno&quot;</span>,<span class="st">&quot;Dos&quot;</span>),<span class="at">col=</span><span class="fu">c</span>(<span class="st">&quot;blue&quot;</span>,<span class="st">&quot;magenta&quot;</span>))</span></code></pre></div>
<p><img src="MEMORIA_files/figure-html/numero%20anillos-1.png" width="672" /></p>
</div>
<div id="tipo-de-anillo-tipo_anillo" class="section level3" number="4.3.18">
<h3><span class="header-section-number">4.3.18</span> Tipo de anillo (Tipo_anillo)</h3>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="preprocesado-de-datos..html#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Tabla de frecuencias letalidad~tipo de anillo</span></span>
<span id="cb90-2"><a href="preprocesado-de-datos..html#cb90-2" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(datos.setas<span class="sc">$</span>Letalidad,datos.setas<span class="sc">$</span>Tipo_anillo)</span></code></pre></div>
<pre><code>##    
##        e    f    l    n    p
##   e 1008   48    0    0 3152
##   p 1768    0 1296   36  816</code></pre>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="preprocesado-de-datos..html#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Gráfico letalidad~tipo de anillo</span></span>
<span id="cb92-2"><a href="preprocesado-de-datos..html#cb92-2" aria-hidden="true" tabindex="-1"></a><span class="fu">barplot</span>(<span class="fu">table</span>(datos.setas<span class="sc">$</span>Letalidad,datos.setas<span class="sc">$</span>Tipo_anillo),<span class="at">main=</span><span class="st">&quot;Letalidad vs Anillo&quot;</span>,<span class="at">xlab=</span><span class="st">&quot;Tipo&quot;</span>,<span class="at">ylab=</span><span class="st">&quot;Número de setas&quot;</span>,<span class="at">names.arg=</span><span class="fu">c</span>(<span class="st">&quot;Evanescente&quot;</span>, <span class="st">&quot;Abocinado&quot;</span>,<span class="st">&quot;Grande&quot;</span>,<span class="st">&quot;Ninguno&quot;</span>,<span class="st">&quot;Colgante&quot;</span>),<span class="at">col=</span><span class="fu">c</span>(<span class="st">&quot;blue&quot;</span>,<span class="st">&quot;magenta&quot;</span>))</span></code></pre></div>
<p><img src="MEMORIA_files/figure-html/tipo%20anillos-1.png" width="672" /></p>
</div>
<div id="color-de-las-esporas" class="section level3" number="4.3.19">
<h3><span class="header-section-number">4.3.19</span> Color de las esporas</h3>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="preprocesado-de-datos..html#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Tabla de frecuencias letalidad~color de las esporas</span></span>
<span id="cb93-2"><a href="preprocesado-de-datos..html#cb93-2" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(datos.setas<span class="sc">$</span>Letalidad,datos.setas<span class="sc">$</span>Color_esporas)</span></code></pre></div>
<pre><code>##    
##        b    h    k    n    o    r    u    w    y
##   e   48   48 1648 1744   48    0   48  576   48
##   p    0 1584  224  224    0   72    0 1812    0</code></pre>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="preprocesado-de-datos..html#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Gráfico letalidad~color de las esporas</span></span>
<span id="cb95-2"><a href="preprocesado-de-datos..html#cb95-2" aria-hidden="true" tabindex="-1"></a><span class="fu">barplot</span>(<span class="fu">table</span>(datos.setas<span class="sc">$</span>Letalidad,datos.setas<span class="sc">$</span>Color_esporas),<span class="at">main=</span><span class="st">&quot;Letalidad vs Esporas&quot;</span>,<span class="at">xlab=</span><span class="st">&quot;Color&quot;</span>,<span class="at">ylab=</span><span class="st">&quot;Número de setas&quot;</span>,<span class="at">names.arg=</span><span class="fu">c</span>(<span class="st">&quot;Ante&quot;</span>, <span class="st">&quot;Chocolate&quot;</span>,<span class="st">&quot;Negro&quot;</span>,<span class="st">&quot;Marrón&quot;</span>,<span class="st">&quot;Naranja&quot;</span>,<span class="st">&quot;Verde&quot;</span>,<span class="st">&quot;Morado&quot;</span>,<span class="st">&quot;Blanco&quot;</span>,<span class="st">&quot;Amarillo&quot;</span>),<span class="at">col=</span><span class="fu">c</span>(<span class="st">&quot;blue&quot;</span>,<span class="st">&quot;magenta&quot;</span>))</span></code></pre></div>
<p><img src="MEMORIA_files/figure-html/color%20esporas-1.png" width="672" /></p>
<p>Podemos observar que aquellas setas que tengan el color de las esporas ante, naranja, morado o amarillo son comestibles, si son verde son totalmente venenosas, y el resto de colores se reparten entre venenosas y comestibles.</p>
</div>
<div id="población" class="section level3" number="4.3.20">
<h3><span class="header-section-number">4.3.20</span> Población</h3>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="preprocesado-de-datos..html#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Tabla de frecuencias letalidad~población</span></span>
<span id="cb96-2"><a href="preprocesado-de-datos..html#cb96-2" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(datos.setas<span class="sc">$</span>Letalidad,datos.setas<span class="sc">$</span>Poblacion)</span></code></pre></div>
<pre><code>##    
##        a    c    n    s    v    y
##   e  384  288  400  880 1192 1064
##   p    0   52    0  368 2848  648</code></pre>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="preprocesado-de-datos..html#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Gráfico letalidad~poblacion</span></span>
<span id="cb98-2"><a href="preprocesado-de-datos..html#cb98-2" aria-hidden="true" tabindex="-1"></a><span class="fu">barplot</span>(<span class="fu">table</span>(datos.setas<span class="sc">$</span>Letalidad,datos.setas<span class="sc">$</span>Poblacion),<span class="at">main=</span><span class="st">&quot;Letalidad&quot;</span>,<span class="at">xlab=</span><span class="st">&quot;Poblacion&quot;</span>,<span class="at">ylab=</span><span class="st">&quot;Número de setas&quot;</span>,<span class="at">names.arg=</span><span class="fu">c</span>(<span class="st">&quot;abundante&quot;</span>, <span class="st">&quot;agrupada&quot;</span>, <span class="st">&quot;numerosa&quot;</span>, <span class="st">&quot;dispersa&quot;</span>, <span class="st">&quot;varias&quot;</span>, <span class="st">&quot;solitaria&quot;</span>),<span class="at">col=</span><span class="fu">c</span>(<span class="st">&quot;blue&quot;</span>,<span class="st">&quot;magenta&quot;</span>))</span></code></pre></div>
<p><img src="MEMORIA_files/figure-html/poblacion-1.png" width="672" /></p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="preprocesado-de-datos..html#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="co">#legend(x = &quot;topright&quot;, legend = c(&quot;Comestible&quot;,&quot;Venenosa&quot;), fill = c(&quot;blue&quot;, &quot;magenta&quot;))</span></span></code></pre></div>
</div>
<div id="habitat" class="section level3" number="4.3.21">
<h3><span class="header-section-number">4.3.21</span> Habitat</h3>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="preprocesado-de-datos..html#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Tabla de frecuencias letalidad~hábitat</span></span>
<span id="cb100-2"><a href="preprocesado-de-datos..html#cb100-2" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(datos.setas<span class="sc">$</span>Letalidad,datos.setas<span class="sc">$</span>Habitat)</span></code></pre></div>
<pre><code>##    
##        d    g    l    m    p    u    w
##   e 1880 1408  240  256  136   96  192
##   p 1268  740  592   36 1008  272    0</code></pre>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="preprocesado-de-datos..html#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Gráfico letalidad~habitat</span></span>
<span id="cb102-2"><a href="preprocesado-de-datos..html#cb102-2" aria-hidden="true" tabindex="-1"></a><span class="fu">barplot</span>(<span class="fu">table</span>(datos.setas<span class="sc">$</span>Letalidad,datos.setas<span class="sc">$</span>Habitat),<span class="at">main=</span><span class="st">&quot;Letalidad&quot;</span>,<span class="at">xlab=</span><span class="st">&quot;Habitat&quot;</span>,<span class="at">ylab=</span><span class="st">&quot;Número de setas&quot;</span>,<span class="at">names.arg=</span><span class="fu">c</span>(<span class="st">&quot;bosques&quot;</span>, <span class="st">&quot;pastos&quot;</span>, <span class="st">&quot;hojas&quot;</span>, <span class="st">&quot;prados&quot;</span>, <span class="st">&quot;caminos&quot;</span>, <span class="st">&quot;urbano&quot;</span>, <span class="st">&quot;desechos&quot;</span>),<span class="at">col=</span><span class="fu">c</span>(<span class="st">&quot;blue&quot;</span>,<span class="st">&quot;magenta&quot;</span>))</span></code></pre></div>
<p><img src="MEMORIA_files/figure-html/habitat-1.png" width="672" /></p>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="preprocesado-de-datos..html#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="co">#legend(x = &quot;topright&quot;, legend = c(&quot;Comestible&quot;,&quot;Venenosa&quot;), fill = c(&quot;blue&quot;, &quot;magenta&quot;))</span></span></code></pre></div>
</div>
</div>
<div id="componentes-principales" class="section level2" number="4.4">
<h2><span class="header-section-number">4.4</span> Componentes principales</h2>
<div id="proceso-previo" class="section level3" number="4.4.1">
<h3><span class="header-section-number">4.4.1</span> Proceso previo</h3>
<p>Dada la naturaleza de nuestros datos, no nos es posible usar la distancia euclídea como medida para comparar como de cerca están dos observaciones, por ello debemos usar otras medidas de similitud. Para ello usamos la siguiente tabla de contingencia:</p>
<p><img src="Tabla%20de%20contingencia.png" /></p>
<p>Dadas dos observaciones distintas, calculamos:</p>
<ul>
<li>a: número de veces que una de las variables binarias es 1 en ambas observaciones.</li>
<li>b: número de veces que una de las variables binarias es 1 en la primera observación y 0 en la otra.</li>
<li>c: número de veces que una de las variables binarias es 0 en la primera observación y 1 en la otra.</li>
<li>d: número de veces que una de las variables binarias es 0 en ambas observaciones.</li>
</ul>
<p>Hacemos un intento de calcular nuestra propia medida de similitud mediante un algoritmo programado por nosotros mismos, la medida que vamos a calcular es la medida Dice o Czekanowski que sigue la siguiente fórmula
<span class="math display">\[\dfrac{2a}{2a+b+c}\]</span></p>
<p>Para calcular <strong>a</strong> como buscamos que ambas multiplicamos el valor de la variable de cada observaciones sean 1 y sumamos el número de veces que esa multiplicación sea 1, es decir, hacemos el sumatorio del producto escalar de los dos vectores de las observaciones.</p>
<p>Como calcular <strong>b,c</strong> supondría más complicado, calculamos <strong>d</strong> y lo hacemos de una forma parecida a <strong>a</strong>, pero le restamos cada valor de la variable a la unidad para después hacer el sumatorio del producto escalar, la razón de hacer esto es convertir aquellas variables que tengan valor 1 en 0 para que nos lleve a error al calcular el número de veces que una de las variables binarias es 0 en ambas observaciones.
Una vez calculada <strong>d</strong>, al número total de variables <span class="math inline">\(k\)</span> le restamos <strong>a,d</strong>, es decir, <span class="math inline">\(b+c=k-a-d\)</span>, entonces la medida queda la siguiente forma
<span class="math display">\[\dfrac{2a}{a+(k-d)}\]</span></p>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="preprocesado-de-datos..html#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="co">#i observacion1, j observacion2, k caracteristica</span></span>
<span id="cb104-2"><a href="preprocesado-de-datos..html#cb104-2" aria-hidden="true" tabindex="-1"></a>i<span class="ot">=</span><span class="dv">1</span></span>
<span id="cb104-3"><a href="preprocesado-de-datos..html#cb104-3" aria-hidden="true" tabindex="-1"></a>n<span class="ot">=</span><span class="fu">dim</span>(setas_train)[<span class="dv">1</span>]</span>
<span id="cb104-4"><a href="preprocesado-de-datos..html#cb104-4" aria-hidden="true" tabindex="-1"></a>k<span class="ot">=</span><span class="fu">dim</span>(setas_train)[<span class="dv">2</span>]</span>
<span id="cb104-5"><a href="preprocesado-de-datos..html#cb104-5" aria-hidden="true" tabindex="-1"></a>distancia_dice<span class="ot">=</span><span class="fu">diag</span>(n)</span>
<span id="cb104-6"><a href="preprocesado-de-datos..html#cb104-6" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span>(i<span class="sc">&lt;</span>n){</span>
<span id="cb104-7"><a href="preprocesado-de-datos..html#cb104-7" aria-hidden="true" tabindex="-1"></a>  j<span class="ot">=</span>i<span class="sc">+</span><span class="dv">1</span></span>
<span id="cb104-8"><a href="preprocesado-de-datos..html#cb104-8" aria-hidden="true" tabindex="-1"></a>  <span class="cf">while</span>(j<span class="sc">&lt;=</span>n) {</span>
<span id="cb104-9"><a href="preprocesado-de-datos..html#cb104-9" aria-hidden="true" tabindex="-1"></a>    <span class="co">#Calculo de similitud</span></span>
<span id="cb104-10"><a href="preprocesado-de-datos..html#cb104-10" aria-hidden="true" tabindex="-1"></a>    a<span class="ot">=</span><span class="fu">sum</span>(setas_train[i,<span class="dv">2</span><span class="sc">:</span>k]<span class="sc">*</span>setas_train[j,<span class="dv">2</span><span class="sc">:</span>k])</span>
<span id="cb104-11"><a href="preprocesado-de-datos..html#cb104-11" aria-hidden="true" tabindex="-1"></a>    d<span class="ot">=</span><span class="fu">sum</span>((<span class="dv">1</span><span class="sc">-</span>setas_train[i,<span class="dv">2</span><span class="sc">:</span>k])<span class="sc">*</span>(<span class="dv">1</span><span class="sc">-</span>setas_train[j,<span class="dv">2</span><span class="sc">:</span>k]))</span>
<span id="cb104-12"><a href="preprocesado-de-datos..html#cb104-12" aria-hidden="true" tabindex="-1"></a>    distancia_dice[i,j]<span class="ot">=</span>((<span class="dv">2</span><span class="sc">*</span>a)<span class="sc">/</span>(a<span class="sc">+</span>(k<span class="sc">-</span>d)))</span>
<span id="cb104-13"><a href="preprocesado-de-datos..html#cb104-13" aria-hidden="true" tabindex="-1"></a>    distancia_dice[j,i]<span class="ot">=</span>((<span class="dv">2</span><span class="sc">*</span>a)<span class="sc">/</span>(a<span class="sc">+</span>(k<span class="sc">-</span>d)))</span>
<span id="cb104-14"><a href="preprocesado-de-datos..html#cb104-14" aria-hidden="true" tabindex="-1"></a>    j<span class="ot">=</span>j<span class="sc">+</span><span class="dv">1</span></span>
<span id="cb104-15"><a href="preprocesado-de-datos..html#cb104-15" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb104-16"><a href="preprocesado-de-datos..html#cb104-16" aria-hidden="true" tabindex="-1"></a>  i<span class="ot">=</span>i<span class="sc">+</span><span class="dv">1</span></span>
<span id="cb104-17"><a href="preprocesado-de-datos..html#cb104-17" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Pero vemos que el proceso es muy largo debido a la dimensión de la matriz de los datos, por ello buscamos alguna función predeterminada en R que sea capaz de hacerla.</p>
<p>Encontramos la función <em>designdist()</em> que nos permite definir nuestra propia medida de similitud. La cabecera de esta función será
<span class="math display">\[designdist(datos,metodo,abcd)\]</span>
donde <strong>datos</strong> es nuestra matriz codificada de forma binaria, <strong>metodo</strong> escribiremos la expresión de la medida de similitud Dice y <strong>abcd=TRUE</strong> para usa la tabla de contingencia para datos binarios.</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="preprocesado-de-datos..html#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="fu">designdist</span>(setas_train[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,<span class="dv">2</span><span class="sc">:</span><span class="dv">117</span>],<span class="st">&quot;(2*a)/(2*a+b+c)&quot;</span>,<span class="at">abcd=</span><span class="cn">TRUE</span>)</span></code></pre></div>
<p>Usando esta función la medida de similitud que calcula no es la correcta, lo comprobamos calculando la medida de similitud de las 10 primeras observaciones con la observación que ocupa la primera línea en nuestros datos de entrenamiento, usando el algoritmo que hemos programo anteriormente.</p>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="preprocesado-de-datos..html#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Nuestro algoritmo de calculo de la medida de similitud</span></span>
<span id="cb106-2"><a href="preprocesado-de-datos..html#cb106-2" aria-hidden="true" tabindex="-1"></a><span class="co">#i observacion1, j observacion2, k caracteristica</span></span>
<span id="cb106-3"><a href="preprocesado-de-datos..html#cb106-3" aria-hidden="true" tabindex="-1"></a>i<span class="ot">=</span><span class="dv">1</span></span>
<span id="cb106-4"><a href="preprocesado-de-datos..html#cb106-4" aria-hidden="true" tabindex="-1"></a>n<span class="ot">=</span><span class="dv">10</span></span>
<span id="cb106-5"><a href="preprocesado-de-datos..html#cb106-5" aria-hidden="true" tabindex="-1"></a>k<span class="ot">=</span><span class="fu">dim</span>(setas_train)[<span class="dv">2</span>]</span>
<span id="cb106-6"><a href="preprocesado-de-datos..html#cb106-6" aria-hidden="true" tabindex="-1"></a>distancia_dice<span class="ot">=</span><span class="fu">diag</span>(n)</span>
<span id="cb106-7"><a href="preprocesado-de-datos..html#cb106-7" aria-hidden="true" tabindex="-1"></a><span class="co">#Distancia de la observacion 1 al resto de observaciones.</span></span>
<span id="cb106-8"><a href="preprocesado-de-datos..html#cb106-8" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span>(i<span class="sc">&lt;</span>n){</span>
<span id="cb106-9"><a href="preprocesado-de-datos..html#cb106-9" aria-hidden="true" tabindex="-1"></a>  j<span class="ot">=</span>i<span class="sc">+</span><span class="dv">1</span></span>
<span id="cb106-10"><a href="preprocesado-de-datos..html#cb106-10" aria-hidden="true" tabindex="-1"></a>  <span class="cf">while</span>(j<span class="sc">&lt;=</span>n) {</span>
<span id="cb106-11"><a href="preprocesado-de-datos..html#cb106-11" aria-hidden="true" tabindex="-1"></a>    <span class="co">#Calculo de similitud</span></span>
<span id="cb106-12"><a href="preprocesado-de-datos..html#cb106-12" aria-hidden="true" tabindex="-1"></a>    a<span class="ot">=</span><span class="fu">sum</span>(setas_train[i,<span class="dv">2</span><span class="sc">:</span>k]<span class="sc">*</span>setas_train[j,<span class="dv">2</span><span class="sc">:</span>k])</span>
<span id="cb106-13"><a href="preprocesado-de-datos..html#cb106-13" aria-hidden="true" tabindex="-1"></a>    d<span class="ot">=</span><span class="fu">sum</span>((<span class="dv">1</span><span class="sc">-</span>setas_train[i,<span class="dv">2</span><span class="sc">:</span>k])<span class="sc">*</span>(<span class="dv">1</span><span class="sc">-</span>setas_train[j,<span class="dv">2</span><span class="sc">:</span>k]))</span>
<span id="cb106-14"><a href="preprocesado-de-datos..html#cb106-14" aria-hidden="true" tabindex="-1"></a>    distancia_dice[i,j]<span class="ot">=</span>((<span class="dv">2</span><span class="sc">*</span>a)<span class="sc">/</span>(a<span class="sc">+</span>(k<span class="sc">-</span>d)))</span>
<span id="cb106-15"><a href="preprocesado-de-datos..html#cb106-15" aria-hidden="true" tabindex="-1"></a>    distancia_dice[j,i]<span class="ot">=</span>((<span class="dv">2</span><span class="sc">*</span>a)<span class="sc">/</span>(a<span class="sc">+</span>(k<span class="sc">-</span>d)))</span>
<span id="cb106-16"><a href="preprocesado-de-datos..html#cb106-16" aria-hidden="true" tabindex="-1"></a>    j<span class="ot">=</span>j<span class="sc">+</span><span class="dv">1</span></span>
<span id="cb106-17"><a href="preprocesado-de-datos..html#cb106-17" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb106-18"><a href="preprocesado-de-datos..html#cb106-18" aria-hidden="true" tabindex="-1"></a>  i<span class="ot">=</span>i<span class="sc">+</span><span class="dv">1</span></span>
<span id="cb106-19"><a href="preprocesado-de-datos..html#cb106-19" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb106-20"><a href="preprocesado-de-datos..html#cb106-20" aria-hidden="true" tabindex="-1"></a><span class="co">#Cambiamos los nombres a las columnas y filas por los números de las observaciones correspondientes.</span></span>
<span id="cb106-21"><a href="preprocesado-de-datos..html#cb106-21" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(distancia_dice)<span class="ot">=</span>indices_train[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>]</span>
<span id="cb106-22"><a href="preprocesado-de-datos..html#cb106-22" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(distancia_dice)<span class="ot">=</span>indices_train[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>]</span>
<span id="cb106-23"><a href="preprocesado-de-datos..html#cb106-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb106-24"><a href="preprocesado-de-datos..html#cb106-24" aria-hidden="true" tabindex="-1"></a>distancia_dice</span></code></pre></div>
<pre><code>##            3         7         8         9        11        12        16
## 3  1.0000000 0.8292683 0.8780488 0.5500000 0.7317073 0.6829268 0.5128205
## 7  0.8292683 1.0000000 0.7317073 0.6000000 0.6829268 0.7317073 0.4615385
## 8  0.8780488 0.7317073 1.0000000 0.6000000 0.7317073 0.7804878 0.5128205
## 9  0.5500000 0.6000000 0.6000000 1.0000000 0.6500000 0.6500000 0.5263158
## 11 0.7317073 0.6829268 0.7317073 0.6500000 1.0000000 0.7317073 0.5128205
## 12 0.6829268 0.7317073 0.7804878 0.6500000 0.7317073 1.0000000 0.4615385
## 16 0.5128205 0.4615385 0.5128205 0.5263158 0.5128205 0.4615385 1.0000000
## 17 0.4736842 0.4210526 0.4736842 0.4864865 0.4736842 0.3684211 0.6111111
## 19 0.6500000 0.5500000 0.7500000 0.7692308 0.6500000 0.7000000 0.6315789
## 21 0.7804878 0.7804878 0.7804878 0.5000000 0.6829268 0.7804878 0.5641026
##           17        19        21
## 3  0.4736842 0.6500000 0.7804878
## 7  0.4210526 0.5500000 0.7804878
## 8  0.4736842 0.7500000 0.7804878
## 9  0.4864865 0.7692308 0.5000000
## 11 0.4736842 0.6500000 0.6829268
## 12 0.3684211 0.7000000 0.7804878
## 16 0.6111111 0.6315789 0.5641026
## 17 1.0000000 0.4864865 0.4736842
## 19 0.4864865 1.0000000 0.6000000
## 21 0.4736842 0.6000000 1.0000000</code></pre>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="preprocesado-de-datos..html#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Función de R</span></span>
<span id="cb108-2"><a href="preprocesado-de-datos..html#cb108-2" aria-hidden="true" tabindex="-1"></a><span class="fu">designdist</span>(setas_train[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,<span class="dv">2</span><span class="sc">:</span>k],<span class="st">&quot;(2*a)/((2*a)+b+c)&quot;</span>,<span class="at">abcd=</span><span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>##            3         7         8         9        11        12        16
## 7  0.8500000                                                            
## 8  0.9000000 0.7500000                                                  
## 9  0.5641026 0.6153846 0.6153846                                        
## 11 0.7500000 0.7000000 0.7500000 0.6666667                              
## 12 0.7000000 0.7500000 0.8000000 0.6666667 0.7500000                    
## 16 0.5263158 0.4736842 0.5263158 0.5405405 0.5263158 0.4736842          
## 17 0.4864865 0.4324324 0.4864865 0.5000000 0.4864865 0.3783784 0.6285714
## 19 0.6666667 0.5641026 0.7692308 0.7894737 0.6666667 0.7179487 0.6486486
## 21 0.8000000 0.8000000 0.8000000 0.5128205 0.7000000 0.8000000 0.5789474
##           17        19
## 7                     
## 8                     
## 9                     
## 11                    
## 12                    
## 16                    
## 17                    
## 19 0.5000000          
## 21 0.4864865 0.6153846</code></pre>
<p>Como hemos dicho, la medidas de similitud no es la correcta, por ello descartamos esta opción.</p>
<p>Finalmente nos decantaremos por la función <em>distance()</em> de la librería <strong><em>philentropy</em></strong>, a la cual debemos introducirle como parámetros la matriz con nuestros datos codificados y el método por el cual queremos calcular la distancia, en nuestro caso, utilizamos <em>method=“dice”</em>, cuya expresión matemática es exactamente:
<span class="math display">\[d = \dfrac{\sum(P_i − Q_i)^2}{(\sum P_i^2 + \sum Q_i^2)}\]</span></p>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="preprocesado-de-datos..html#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Distancia Dice</span></span>
<span id="cb110-2"><a href="preprocesado-de-datos..html#cb110-2" aria-hidden="true" tabindex="-1"></a>distancia_dice<span class="ot">=</span><span class="fu">distance</span>(setas_train[,<span class="dv">2</span><span class="sc">:</span><span class="fu">dim</span>(setas_train)[<span class="dv">2</span>]],<span class="at">method=</span><span class="st">&quot;dice&quot;</span>)</span></code></pre></div>
<p>Una vez calculada nuestra matiz con la medida de similitud entre todas las variables, buscamos encontrar unos puntos que nos sirvan como referentes, esto es debido que trabajar con una matriz de tales dimensiones va a suponer un problema de cómputo en futuros modelos a aplicar. Por ello calculamos una cierta cantidad de medoides que los hallaremos trabajando con particiones e intentando minimizar la distancia entre puntos de un grupo y otro punto designado como el centro de ese grupo. A diferencia de <em>kmeans()</em>, <em>fastkmed()</em> escoge como medoides puntos de los datos y trabaja con una métrica arbitraria de distancias.</p>
<p>Para seleccionar el número de medoides adecuado, hacemos cross-validation aplicando después un análisis de componente principales, probamos primero con una cantidad muy pequeña de medoides.</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="preprocesado-de-datos..html#cb111-1" aria-hidden="true" tabindex="-1"></a>i<span class="ot">=</span><span class="dv">1</span></span>
<span id="cb111-2"><a href="preprocesado-de-datos..html#cb111-2" aria-hidden="true" tabindex="-1"></a>datos<span class="ot">=</span><span class="fu">matrix</span>(<span class="at">nrow=</span><span class="dv">9</span>,<span class="at">ncol=</span><span class="dv">3</span>)</span>
<span id="cb111-3"><a href="preprocesado-de-datos..html#cb111-3" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(datos)<span class="ot">=</span><span class="fu">c</span>(<span class="st">&quot;0&quot;</span>,<span class="st">&quot;1&quot;</span>,<span class="st">&quot;Proporción de la varianza acumulada explicada&quot;</span>)</span>
<span id="cb111-4"><a href="preprocesado-de-datos..html#cb111-4" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(datos)<span class="ot">=</span><span class="fu">seq</span>(<span class="dv">1</span>,<span class="dv">9</span>,<span class="dv">1</span>)</span>
<span id="cb111-5"><a href="preprocesado-de-datos..html#cb111-5" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span>(i<span class="sc">&lt;</span><span class="dv">10</span>){</span>
<span id="cb111-6"><a href="preprocesado-de-datos..html#cb111-6" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Cálculo de los medoides: </span></span>
<span id="cb111-7"><a href="preprocesado-de-datos..html#cb111-7" aria-hidden="true" tabindex="-1"></a>  k<span class="ot">=</span><span class="fu">fastkmed</span>(distancia_dice,<span class="at">ncluster=</span>i)</span>
<span id="cb111-8"><a href="preprocesado-de-datos..html#cb111-8" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Proporción de los medoides:</span></span>
<span id="cb111-9"><a href="preprocesado-de-datos..html#cb111-9" aria-hidden="true" tabindex="-1"></a>  proporcion<span class="ot">=</span><span class="fu">c</span>(<span class="fu">sum</span>(setas_train[k<span class="sc">$</span>medoid,<span class="dv">1</span>]<span class="sc">==</span><span class="dv">0</span>),<span class="fu">sum</span>(setas_train[k<span class="sc">$</span>medoid,<span class="dv">1</span>]<span class="sc">==</span><span class="dv">1</span>))</span>
<span id="cb111-10"><a href="preprocesado-de-datos..html#cb111-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb111-11"><a href="preprocesado-de-datos..html#cb111-11" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Análsiis de componentes principales</span></span>
<span id="cb111-12"><a href="preprocesado-de-datos..html#cb111-12" aria-hidden="true" tabindex="-1"></a>  pca.traink<span class="ot">=</span><span class="fu">prcomp</span>(distancia_dice[k<span class="sc">$</span>medoid,k<span class="sc">$</span>medoid])</span>
<span id="cb111-13"><a href="preprocesado-de-datos..html#cb111-13" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Varianza explicada</span></span>
<span id="cb111-14"><a href="preprocesado-de-datos..html#cb111-14" aria-hidden="true" tabindex="-1"></a>  varianza.explicada<span class="ot">=</span>pca.traink<span class="sc">$</span>sdev<span class="sc">^</span><span class="dv">2</span><span class="sc">/</span><span class="fu">sum</span>(pca.traink<span class="sc">$</span>sdev<span class="sc">^</span><span class="dv">2</span>)</span>
<span id="cb111-15"><a href="preprocesado-de-datos..html#cb111-15" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(proporcion[<span class="dv">2</span>]<span class="sc">==</span><span class="dv">0</span>){</span>
<span id="cb111-16"><a href="preprocesado-de-datos..html#cb111-16" aria-hidden="true" tabindex="-1"></a>    <span class="co">#Proporción de la varianza acumulada explicada por la primera componente principal</span></span>
<span id="cb111-17"><a href="preprocesado-de-datos..html#cb111-17" aria-hidden="true" tabindex="-1"></a>    varianza.explicada.acumulada<span class="ot">=</span>varianza.explicada[<span class="dv">1</span>]</span>
<span id="cb111-18"><a href="preprocesado-de-datos..html#cb111-18" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb111-19"><a href="preprocesado-de-datos..html#cb111-19" aria-hidden="true" tabindex="-1"></a>  <span class="cf">else</span>{</span>
<span id="cb111-20"><a href="preprocesado-de-datos..html#cb111-20" aria-hidden="true" tabindex="-1"></a>    <span class="co">#Proporción de la varianza acumulada explicada por las dos primeras componentes principales</span></span>
<span id="cb111-21"><a href="preprocesado-de-datos..html#cb111-21" aria-hidden="true" tabindex="-1"></a>    varianza.explicada.acumulada<span class="ot">=</span>varianza.explicada[<span class="dv">1</span>]<span class="sc">+</span>varianza.explicada[<span class="dv">2</span>]</span>
<span id="cb111-22"><a href="preprocesado-de-datos..html#cb111-22" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb111-23"><a href="preprocesado-de-datos..html#cb111-23" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Almacenamos los datos</span></span>
<span id="cb111-24"><a href="preprocesado-de-datos..html#cb111-24" aria-hidden="true" tabindex="-1"></a>  datos[i,]<span class="ot">=</span><span class="fu">c</span>(proporcion,varianza.explicada.acumulada)</span>
<span id="cb111-25"><a href="preprocesado-de-datos..html#cb111-25" aria-hidden="true" tabindex="-1"></a>i<span class="ot">=</span>i<span class="sc">+</span><span class="dv">1</span></span>
<span id="cb111-26"><a href="preprocesado-de-datos..html#cb111-26" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb111-27"><a href="preprocesado-de-datos..html#cb111-27" aria-hidden="true" tabindex="-1"></a>datos</span></code></pre></div>
<pre><code>##   0 1 Proporción de la varianza acumulada explicada
## 1 1 0                                           NaN
## 2 2 0                                     1.0000000
## 3 3 0                                     0.8251352
## 4 3 1                                     0.9489239
## 5 3 2                                     0.9373949
## 6 4 2                                     0.9634858
## 7 4 3                                     0.9430637
## 8 5 3                                     0.9066387
## 9 6 3                                     0.9029409</code></pre>
<p>Podemos ver que a partir de 4 medoides el ajuste por componente principales empieza a mejorar, esto se debe a que las setas venenosas empiezan a estar presentadas por algún medoide. Vamos a utilizar la proporción de varianza acumulada como medida para seleccionar el número de medoides que necesitamos, y vemos que cuando el número de medoides está entre 1 y 10 hay una mayor proporción de varianza acumulada explicada y puede deberse al número reducido de componentes principales.</p>
<p>Ahora vamos a probar a hacerlo con una cantidad distintas de medoides, desde 10 medoides hasta 250 aumentando de diez en diez. Nos quedaremos con aquella que tenga mayor proporción acumulada pero sin sacrificar información sobre los datos.</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="preprocesado-de-datos..html#cb113-1" aria-hidden="true" tabindex="-1"></a>i<span class="ot">=</span><span class="dv">10</span></span>
<span id="cb113-2"><a href="preprocesado-de-datos..html#cb113-2" aria-hidden="true" tabindex="-1"></a>datos<span class="ot">=</span><span class="fu">matrix</span>(<span class="at">nrow=</span><span class="dv">25</span>,<span class="at">ncol=</span><span class="dv">3</span>)</span>
<span id="cb113-3"><a href="preprocesado-de-datos..html#cb113-3" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(datos)<span class="ot">=</span><span class="fu">c</span>(<span class="st">&quot;0&quot;</span>,<span class="st">&quot;1&quot;</span>,<span class="st">&quot;Proporción de la varianza acumulada explicada&quot;</span>)</span>
<span id="cb113-4"><a href="preprocesado-de-datos..html#cb113-4" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(datos)<span class="ot">=</span><span class="fu">seq</span>(<span class="dv">10</span>,<span class="dv">250</span>,<span class="dv">10</span>)</span>
<span id="cb113-5"><a href="preprocesado-de-datos..html#cb113-5" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span>(i<span class="sc">&lt;=</span><span class="dv">250</span>){</span>
<span id="cb113-6"><a href="preprocesado-de-datos..html#cb113-6" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Cálculo de los medoides: </span></span>
<span id="cb113-7"><a href="preprocesado-de-datos..html#cb113-7" aria-hidden="true" tabindex="-1"></a>  k<span class="ot">=</span><span class="fu">fastkmed</span>(distancia_dice,<span class="at">ncluster=</span>i)</span>
<span id="cb113-8"><a href="preprocesado-de-datos..html#cb113-8" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Proporción de los medoides:</span></span>
<span id="cb113-9"><a href="preprocesado-de-datos..html#cb113-9" aria-hidden="true" tabindex="-1"></a>  proporcion<span class="ot">=</span><span class="fu">c</span>(<span class="fu">sum</span>(setas_train[k<span class="sc">$</span>medoid,<span class="dv">1</span>]<span class="sc">==</span><span class="dv">0</span>),<span class="fu">sum</span>(setas_train[k<span class="sc">$</span>medoid,<span class="dv">1</span>]<span class="sc">==</span><span class="dv">1</span>))</span>
<span id="cb113-10"><a href="preprocesado-de-datos..html#cb113-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb113-11"><a href="preprocesado-de-datos..html#cb113-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb113-12"><a href="preprocesado-de-datos..html#cb113-12" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Análsiis de componentes principales</span></span>
<span id="cb113-13"><a href="preprocesado-de-datos..html#cb113-13" aria-hidden="true" tabindex="-1"></a>  pca.traink<span class="ot">=</span><span class="fu">prcomp</span>(distancia_dice[k<span class="sc">$</span>medoid,k<span class="sc">$</span>medoid])</span>
<span id="cb113-14"><a href="preprocesado-de-datos..html#cb113-14" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Varianza explicada</span></span>
<span id="cb113-15"><a href="preprocesado-de-datos..html#cb113-15" aria-hidden="true" tabindex="-1"></a>  varianza.explicada<span class="ot">=</span>pca.traink<span class="sc">$</span>sdev<span class="sc">^</span><span class="dv">2</span><span class="sc">/</span><span class="fu">sum</span>(pca.traink<span class="sc">$</span>sdev<span class="sc">^</span><span class="dv">2</span>)</span>
<span id="cb113-16"><a href="preprocesado-de-datos..html#cb113-16" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Proporción de la varianza acumulada explicada por las dos primeras componentes principales</span></span>
<span id="cb113-17"><a href="preprocesado-de-datos..html#cb113-17" aria-hidden="true" tabindex="-1"></a>  varianza.explicada.acumulada<span class="ot">=</span>varianza.explicada[<span class="dv">1</span>]<span class="sc">+</span>varianza.explicada[<span class="dv">2</span>]</span>
<span id="cb113-18"><a href="preprocesado-de-datos..html#cb113-18" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb113-19"><a href="preprocesado-de-datos..html#cb113-19" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb113-20"><a href="preprocesado-de-datos..html#cb113-20" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Almacenamos los datos</span></span>
<span id="cb113-21"><a href="preprocesado-de-datos..html#cb113-21" aria-hidden="true" tabindex="-1"></a>  datos[i<span class="sc">/</span><span class="dv">10</span>,]<span class="ot">=</span><span class="fu">c</span>(proporcion,varianza.explicada.acumulada)</span>
<span id="cb113-22"><a href="preprocesado-de-datos..html#cb113-22" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb113-23"><a href="preprocesado-de-datos..html#cb113-23" aria-hidden="true" tabindex="-1"></a>i<span class="ot">=</span>i<span class="sc">+</span><span class="dv">10</span></span>
<span id="cb113-24"><a href="preprocesado-de-datos..html#cb113-24" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb113-25"><a href="preprocesado-de-datos..html#cb113-25" aria-hidden="true" tabindex="-1"></a>datos</span></code></pre></div>
<pre><code>##       0  1 Proporción de la varianza acumulada explicada
## 10    7  3                                     0.8977660
## 20   14  6                                     0.8523337
## 30   21  9                                     0.7861202
## 40   31  9                                     0.8140190
## 50   39 11                                     0.7971339
## 60   48 12                                     0.8206506
## 70   57 13                                     0.8040234
## 80   63 17                                     0.7998742
## 90   70 20                                     0.7996294
## 100  77 23                                     0.7918298
## 110  83 27                                     0.7883319
## 120  91 29                                     0.7913152
## 130  98 32                                     0.7951365
## 140 106 34                                     0.7812759
## 150 115 35                                     0.7911513
## 160 124 36                                     0.7901510
## 170 134 36                                     0.7928057
## 180 141 39                                     0.7909774
## 190 150 40                                     0.7925705
## 200 163 37                                     0.7903846
## 210 175 35                                     0.7996704
## 220 179 41                                     0.7902806
## 230 191 39                                     0.7844039
## 240 201 39                                     0.7815717
## 250 209 41                                     0.7813508</code></pre>
<p>Los resultados son bastantes parecidos, vemos primero que la proporción acumulada va disminuyendo al ir aumentando el número de medoides pero vemos justamente cuando el número es 60 vuelve a aumentar, por ello nos quedamos con ese número de medoides a pesar que es con 20 medoides cuando alcanzamos una mayor proporción de la variablidad de los datos explicada.</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="preprocesado-de-datos..html#cb115-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Cálculo de los medoides: </span></span>
<span id="cb115-2"><a href="preprocesado-de-datos..html#cb115-2" aria-hidden="true" tabindex="-1"></a>k60<span class="ot">=</span><span class="fu">fastkmed</span>(distancia_dice,<span class="at">ncluster=</span><span class="dv">60</span>)</span>
<span id="cb115-3"><a href="preprocesado-de-datos..html#cb115-3" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(setas_train<span class="sc">$</span>Letalidad[k60<span class="sc">$</span>medoid])</span></code></pre></div>
<pre><code>## 
##  0  1 
## 48 12</code></pre>
<p>Podemos ver que de los 60 medoides que hemos calculado, necesitamos 48 para explicar las setas no venenosas mientras que solo 12 para las venenosas. La proporción se mantiene cogiendo un número distinto de medoides, siendo setas no venenosas entre un 70%-80% de los medoides.</p>
<p>Con estos medoides volvemos a realizar el análisis de componente principales para ahora estudiarlo más detenidamente.</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="preprocesado-de-datos..html#cb117-1" aria-hidden="true" tabindex="-1"></a>distancia_medoides<span class="ot">=</span>distancia_dice[k60<span class="sc">$</span>medoid,k60<span class="sc">$</span>medoid]</span>
<span id="cb117-2"><a href="preprocesado-de-datos..html#cb117-2" aria-hidden="true" tabindex="-1"></a><span class="co">#Análisis Componentes principales:</span></span>
<span id="cb117-3"><a href="preprocesado-de-datos..html#cb117-3" aria-hidden="true" tabindex="-1"></a>pca<span class="fl">.60</span><span class="ot">=</span><span class="fu">prcomp</span>(distancia_medoides)</span>
<span id="cb117-4"><a href="preprocesado-de-datos..html#cb117-4" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(pca<span class="fl">.60</span>)</span></code></pre></div>
<pre><code>## Importance of components:
##                           PC1     PC2     PC3     PC4     PC5     PC6     PC7
## Standard deviation     1.1087 0.34987 0.25644 0.23866 0.20065 0.18852 0.17883
## Proportion of Variance 0.7463 0.07432 0.03993 0.03458 0.02444 0.02158 0.01942
## Cumulative Proportion  0.7463 0.82065 0.86058 0.89516 0.91960 0.94118 0.96060
##                            PC8     PC9    PC10    PC11    PC12    PC13    PC14
## Standard deviation     0.12967 0.10563 0.09664 0.08732 0.07433 0.06568 0.05138
## Proportion of Variance 0.01021 0.00677 0.00567 0.00463 0.00335 0.00262 0.00160
## Cumulative Proportion  0.97081 0.97758 0.98325 0.98788 0.99124 0.99386 0.99546
##                           PC15    PC16    PC17    PC18    PC19    PC20    PC21
## Standard deviation     0.04188 0.04048 0.03690 0.02822 0.02382 0.02180 0.01812
## Proportion of Variance 0.00106 0.00099 0.00083 0.00048 0.00034 0.00029 0.00020
## Cumulative Proportion  0.99653 0.99752 0.99835 0.99883 0.99918 0.99946 0.99966
##                           PC22    PC23    PC24     PC25     PC26     PC27
## Standard deviation     0.01386 0.01284 0.00958 0.006961 0.005477 0.004669
## Proportion of Variance 0.00012 0.00010 0.00006 0.000030 0.000020 0.000010
## Cumulative Proportion  0.99978 0.99988 0.99994 0.999970 0.999980 1.000000
##                            PC28      PC29     PC30      PC31      PC32
## Standard deviation     0.002317 4.032e-05 4.13e-16 8.321e-17 8.321e-17
## Proportion of Variance 0.000000 0.000e+00 0.00e+00 0.000e+00 0.000e+00
## Cumulative Proportion  1.000000 1.000e+00 1.00e+00 1.000e+00 1.000e+00
##                             PC33      PC34      PC35      PC36      PC37
## Standard deviation     8.321e-17 8.321e-17 8.321e-17 8.321e-17 8.321e-17
## Proportion of Variance 0.000e+00 0.000e+00 0.000e+00 0.000e+00 0.000e+00
## Cumulative Proportion  1.000e+00 1.000e+00 1.000e+00 1.000e+00 1.000e+00
##                             PC38      PC39      PC40      PC41      PC42
## Standard deviation     8.321e-17 8.321e-17 8.321e-17 8.321e-17 8.321e-17
## Proportion of Variance 0.000e+00 0.000e+00 0.000e+00 0.000e+00 0.000e+00
## Cumulative Proportion  1.000e+00 1.000e+00 1.000e+00 1.000e+00 1.000e+00
##                             PC43      PC44      PC45      PC46      PC47
## Standard deviation     8.321e-17 8.321e-17 8.321e-17 8.321e-17 8.321e-17
## Proportion of Variance 0.000e+00 0.000e+00 0.000e+00 0.000e+00 0.000e+00
## Cumulative Proportion  1.000e+00 1.000e+00 1.000e+00 1.000e+00 1.000e+00
##                             PC48      PC49      PC50      PC51      PC52
## Standard deviation     8.321e-17 8.321e-17 8.321e-17 8.321e-17 8.321e-17
## Proportion of Variance 0.000e+00 0.000e+00 0.000e+00 0.000e+00 0.000e+00
## Cumulative Proportion  1.000e+00 1.000e+00 1.000e+00 1.000e+00 1.000e+00
##                             PC53      PC54      PC55      PC56      PC57
## Standard deviation     8.321e-17 8.321e-17 8.321e-17 8.321e-17 8.321e-17
## Proportion of Variance 0.000e+00 0.000e+00 0.000e+00 0.000e+00 0.000e+00
## Cumulative Proportion  1.000e+00 1.000e+00 1.000e+00 1.000e+00 1.000e+00
##                             PC58      PC59      PC60
## Standard deviation     8.321e-17 8.321e-17 8.321e-17
## Proportion of Variance 0.000e+00 0.000e+00 0.000e+00
## Cumulative Proportion  1.000e+00 1.000e+00 1.000e+00</code></pre>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="preprocesado-de-datos..html#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(pca<span class="fl">.60</span><span class="sc">$</span>x,<span class="at">col=</span>setas_train<span class="sc">$</span>Letalidad[k60<span class="sc">$</span>medoid]<span class="sc">+</span><span class="dv">1</span>,<span class="at">pch=</span><span class="dv">19</span>)</span></code></pre></div>
<p><img src="MEMORIA_files/figure-html/pca-1.png" width="672" /></p>
<p>En la gráfica, vemos como los medoides que se encuentra con un valor de <span class="math inline">\(PC1&lt;0\)</span> son setas no venenosas, si <span class="math inline">\(PC1&gt;2\)</span> las setas son venenosas, mientras que en el intervalo <span class="math inline">\(PC1\in(0,2)\)</span> tenemos setas venenosas y no venenosas.</p>
<p>Las dos gráficas siguientes son las mismas que la anterior, pero las realizamos para ver si algunos de los puntos está superpuesto por otro.</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="preprocesado-de-datos..html#cb120-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Gráfico:</span></span>
<span id="cb120-2"><a href="preprocesado-de-datos..html#cb120-2" aria-hidden="true" tabindex="-1"></a><span class="do">##Indices de los medoides según toxicidad:</span></span>
<span id="cb120-3"><a href="preprocesado-de-datos..html#cb120-3" aria-hidden="true" tabindex="-1"></a>comestible<span class="ot">=</span><span class="fu">which</span>(setas_train[k60<span class="sc">$</span>medoid,<span class="dv">1</span>]<span class="sc">==</span><span class="dv">0</span>)</span>
<span id="cb120-4"><a href="preprocesado-de-datos..html#cb120-4" aria-hidden="true" tabindex="-1"></a>no.comestibles<span class="ot">=</span><span class="fu">which</span>(setas_train[k60<span class="sc">$</span>medoid,<span class="dv">1</span>]<span class="sc">==</span><span class="dv">1</span>)</span>
<span id="cb120-5"><a href="preprocesado-de-datos..html#cb120-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-6"><a href="preprocesado-de-datos..html#cb120-6" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>))</span>
<span id="cb120-7"><a href="preprocesado-de-datos..html#cb120-7" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(pca<span class="fl">.60</span><span class="sc">$</span>x)</span>
<span id="cb120-8"><a href="preprocesado-de-datos..html#cb120-8" aria-hidden="true" tabindex="-1"></a><span class="fu">points</span>(pca<span class="fl">.60</span><span class="sc">$</span>x[comestible,<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>],<span class="at">col=</span><span class="dv">1</span>,<span class="at">pch=</span><span class="dv">19</span>)</span>
<span id="cb120-9"><a href="preprocesado-de-datos..html#cb120-9" aria-hidden="true" tabindex="-1"></a><span class="fu">points</span>(pca<span class="fl">.60</span><span class="sc">$</span>x[no.comestibles,<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>],<span class="at">col=</span><span class="dv">2</span>,<span class="at">pch=</span><span class="dv">19</span>)</span>
<span id="cb120-10"><a href="preprocesado-de-datos..html#cb120-10" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(pca<span class="fl">.60</span><span class="sc">$</span>x)</span>
<span id="cb120-11"><a href="preprocesado-de-datos..html#cb120-11" aria-hidden="true" tabindex="-1"></a><span class="fu">points</span>(pca<span class="fl">.60</span><span class="sc">$</span>x[no.comestibles,<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>],<span class="at">col=</span><span class="dv">2</span>,<span class="at">pch=</span><span class="dv">19</span>)</span>
<span id="cb120-12"><a href="preprocesado-de-datos..html#cb120-12" aria-hidden="true" tabindex="-1"></a><span class="fu">points</span>(pca<span class="fl">.60</span><span class="sc">$</span>x[comestible,<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>],<span class="at">col=</span><span class="dv">1</span>,<span class="at">pch=</span><span class="dv">19</span>)</span></code></pre></div>
<p><img src="MEMORIA_files/figure-html/grafico%20pca%20alternativo-1.png" width="672" /></p>
<p>Pero trabajar solo con los 60 medoides podemos perder mucha información, por ello rehacemos todo lo anterior pero ahora aplicaremos el análisis de componentes principales a la distancia de todas las observaciones con los 60 medoides.</p>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb121-1"><a href="preprocesado-de-datos..html#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Análsiis de componentes principales</span></span>
<span id="cb121-2"><a href="preprocesado-de-datos..html#cb121-2" aria-hidden="true" tabindex="-1"></a>pca.train<span class="ot">=</span><span class="fu">prcomp</span>(distancia_dice[,k60<span class="sc">$</span>medoid])</span>
<span id="cb121-3"><a href="preprocesado-de-datos..html#cb121-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(pca.train)</span></code></pre></div>
<pre><code>## Importance of components:
##                           PC1    PC2     PC3     PC4     PC5     PC6     PC7
## Standard deviation     1.0171 0.4650 0.31570 0.21035 0.16805 0.16003 0.13357
## Proportion of Variance 0.6742 0.1409 0.06496 0.02884 0.01841 0.01669 0.01163
## Cumulative Proportion  0.6742 0.8151 0.88003 0.90887 0.92727 0.94396 0.95559
##                            PC8     PC9    PC10    PC11    PC12    PC13    PC14
## Standard deviation     0.12372 0.10251 0.08653 0.08476 0.07233 0.06329 0.06211
## Proportion of Variance 0.00997 0.00685 0.00488 0.00468 0.00341 0.00261 0.00251
## Cumulative Proportion  0.96556 0.97241 0.97729 0.98197 0.98538 0.98800 0.99051
##                           PC15    PC16    PC17    PC18    PC19    PC20    PC21
## Standard deviation     0.05924 0.04662 0.04442 0.03932 0.03631 0.03240 0.02856
## Proportion of Variance 0.00229 0.00142 0.00129 0.00101 0.00086 0.00068 0.00053
## Cumulative Proportion  0.99280 0.99421 0.99550 0.99651 0.99737 0.99805 0.99858
##                           PC22    PC23    PC24    PC25    PC26    PC27     PC28
## Standard deviation     0.02533 0.02180 0.01987 0.01635 0.01170 0.01148 0.008459
## Proportion of Variance 0.00042 0.00031 0.00026 0.00017 0.00009 0.00009 0.000050
## Cumulative Proportion  0.99900 0.99931 0.99957 0.99974 0.99983 0.99992 0.999960
##                            PC29     PC30      PC31      PC32      PC33
## Standard deviation     0.007581 6.59e-05 5.434e-15 3.426e-15 1.026e-15
## Proportion of Variance 0.000040 0.00e+00 0.000e+00 0.000e+00 0.000e+00
## Cumulative Proportion  1.000000 1.00e+00 1.000e+00 1.000e+00 1.000e+00
##                             PC34      PC35      PC36      PC37      PC38
## Standard deviation     7.238e-16 6.064e-16 4.771e-16 4.039e-16 3.609e-16
## Proportion of Variance 0.000e+00 0.000e+00 0.000e+00 0.000e+00 0.000e+00
## Cumulative Proportion  1.000e+00 1.000e+00 1.000e+00 1.000e+00 1.000e+00
##                             PC39      PC40     PC41      PC42      PC43
## Standard deviation     2.875e-16 2.685e-16 2.33e-16 1.906e-16 1.595e-16
## Proportion of Variance 0.000e+00 0.000e+00 0.00e+00 0.000e+00 0.000e+00
## Cumulative Proportion  1.000e+00 1.000e+00 1.00e+00 1.000e+00 1.000e+00
##                             PC44      PC45      PC46      PC47      PC48
## Standard deviation     1.595e-16 1.446e-16 9.842e-17 7.135e-17 7.135e-17
## Proportion of Variance 0.000e+00 0.000e+00 0.000e+00 0.000e+00 0.000e+00
## Cumulative Proportion  1.000e+00 1.000e+00 1.000e+00 1.000e+00 1.000e+00
##                             PC49      PC50      PC51      PC52      PC53
## Standard deviation     7.135e-17 7.135e-17 7.135e-17 7.135e-17 7.135e-17
## Proportion of Variance 0.000e+00 0.000e+00 0.000e+00 0.000e+00 0.000e+00
## Cumulative Proportion  1.000e+00 1.000e+00 1.000e+00 1.000e+00 1.000e+00
##                             PC54      PC55      PC56      PC57      PC58
## Standard deviation     7.135e-17 7.135e-17 7.135e-17 7.135e-17 4.181e-17
## Proportion of Variance 0.000e+00 0.000e+00 0.000e+00 0.000e+00 0.000e+00
## Cumulative Proportion  1.000e+00 1.000e+00 1.000e+00 1.000e+00 1.000e+00
##                            PC59      PC60
## Standard deviation     3.94e-17 2.391e-17
## Proportion of Variance 0.00e+00 0.000e+00
## Cumulative Proportion  1.00e+00 1.000e+00</code></pre>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="preprocesado-de-datos..html#cb123-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(pca.train<span class="sc">$</span>x,<span class="at">col=</span>setas_train<span class="sc">$</span>Letalidad<span class="sc">+</span><span class="dv">1</span>,<span class="at">pch=</span><span class="dv">19</span>)</span></code></pre></div>
<p><img src="MEMORIA_files/figure-html/medoides%20a%20observaciones-1.png" width="672" /></p>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="preprocesado-de-datos..html#cb124-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Gráfico alternativo</span></span>
<span id="cb124-2"><a href="preprocesado-de-datos..html#cb124-2" aria-hidden="true" tabindex="-1"></a>comestible<span class="ot">=</span><span class="fu">which</span>(setas_train[,<span class="dv">1</span>]<span class="sc">==</span><span class="dv">0</span>)</span>
<span id="cb124-3"><a href="preprocesado-de-datos..html#cb124-3" aria-hidden="true" tabindex="-1"></a>no.comestibles<span class="ot">=</span><span class="fu">which</span>(setas_train[,<span class="dv">1</span>]<span class="sc">==</span><span class="dv">1</span>)</span>
<span id="cb124-4"><a href="preprocesado-de-datos..html#cb124-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb124-5"><a href="preprocesado-de-datos..html#cb124-5" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>))</span>
<span id="cb124-6"><a href="preprocesado-de-datos..html#cb124-6" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(pca.train<span class="sc">$</span>x,<span class="at">type=</span><span class="st">&quot;n&quot;</span>)</span>
<span id="cb124-7"><a href="preprocesado-de-datos..html#cb124-7" aria-hidden="true" tabindex="-1"></a><span class="fu">points</span>(pca.train<span class="sc">$</span>x[comestible,<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>],<span class="at">col=</span><span class="dv">1</span>,<span class="at">pch=</span><span class="dv">19</span>)</span>
<span id="cb124-8"><a href="preprocesado-de-datos..html#cb124-8" aria-hidden="true" tabindex="-1"></a><span class="fu">points</span>(pca.train<span class="sc">$</span>x[no.comestibles,<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>],<span class="at">col=</span><span class="dv">2</span>,<span class="at">pch=</span><span class="dv">19</span>)</span>
<span id="cb124-9"><a href="preprocesado-de-datos..html#cb124-9" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(pca.train<span class="sc">$</span>x,<span class="at">type=</span><span class="st">&quot;n&quot;</span>)</span>
<span id="cb124-10"><a href="preprocesado-de-datos..html#cb124-10" aria-hidden="true" tabindex="-1"></a><span class="fu">points</span>(pca.train<span class="sc">$</span>x[no.comestibles,<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>],<span class="at">col=</span><span class="dv">2</span>,<span class="at">pch=</span><span class="dv">19</span>)</span>
<span id="cb124-11"><a href="preprocesado-de-datos..html#cb124-11" aria-hidden="true" tabindex="-1"></a><span class="fu">points</span>(pca.train<span class="sc">$</span>x[comestible,<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>],<span class="at">col=</span><span class="dv">1</span>,<span class="at">pch=</span><span class="dv">19</span>)</span></code></pre></div>
<p><img src="MEMORIA_files/figure-html/medoides%20a%20observaciones-2.png" width="672" /></p>
<p>Observamos algo bastante parecido a lo obtenido en el análisis anterior, dos zonas bastante bien diferenciadas y otra zona donde coinciden las setas venenosas y las comestibles. La única diferencia con el análisis anterior son las coordenadas de cada seta, han cambiado ligeramente, hasta el punto de haber dado un giro de 180 grados. Luego podemos llegar a suponer que el número de clusters necesarios en un futuro análisis clúster serían por lo menos 4 o 5, para intentar clasificar lo mejor posible la nube de puntos de <span class="math inline">\(\left\{(PC1,PC2)/ PC1\in(-1,2),PC2\in(-0.5,1)\right\}\)</span>.</p>
</div>
</div>
<div id="transformación-de-variables" class="section level2" number="4.5">
<h2><span class="header-section-number">4.5</span> Transformación de variables</h2>
<p>Las variables no necesitan ninguna modificación adicional, pues ya las hemos codificado anteriormente. Lo único que transformamos son nuestros datos. A partir de ahora, los datos serán la distancia de cada seta a los 60 medoides que hemos calculado, esto permite utilizar la distancia euclídea en los algoritmos posteriores.</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="preprocesado-de-datos..html#cb125-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Datos train:</span></span>
<span id="cb125-2"><a href="preprocesado-de-datos..html#cb125-2" aria-hidden="true" tabindex="-1"></a>setas60_train<span class="ot">=</span>distancia_dice[,k60<span class="sc">$</span>medoid]</span>
<span id="cb125-3"><a href="preprocesado-de-datos..html#cb125-3" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(setas60_train)<span class="ot">=</span><span class="fu">rownames</span>(setas_train[k60<span class="sc">$</span>medoid,])</span>
<span id="cb125-4"><a href="preprocesado-de-datos..html#cb125-4" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(setas60_train)<span class="ot">=</span><span class="fu">rownames</span>(setas_train)</span>
<span id="cb125-5"><a href="preprocesado-de-datos..html#cb125-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb125-6"><a href="preprocesado-de-datos..html#cb125-6" aria-hidden="true" tabindex="-1"></a><span class="co">#Datos test:</span></span>
<span id="cb125-7"><a href="preprocesado-de-datos..html#cb125-7" aria-hidden="true" tabindex="-1"></a>medoides_setas_test<span class="ot">=</span><span class="fu">rbind</span>(setas_train[k60<span class="sc">$</span>medoid,],setas_test)</span>
<span id="cb125-8"><a href="preprocesado-de-datos..html#cb125-8" aria-hidden="true" tabindex="-1"></a>distancia_medoides_test<span class="ot">=</span><span class="fu">distance</span>(medoides_setas_test[,<span class="dv">2</span><span class="sc">:</span><span class="dv">117</span>],<span class="at">method=</span><span class="st">&quot;dice&quot;</span>)</span>
<span id="cb125-9"><a href="preprocesado-de-datos..html#cb125-9" aria-hidden="true" tabindex="-1"></a>setas60_test<span class="ot">=</span>distancia_medoides_test[<span class="sc">-</span><span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">60</span>),<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">60</span>)]</span>
<span id="cb125-10"><a href="preprocesado-de-datos..html#cb125-10" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(setas60_test)<span class="ot">=</span><span class="fu">colnames</span>(setas60_train)</span>
<span id="cb125-11"><a href="preprocesado-de-datos..html#cb125-11" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(setas60_test)<span class="ot">=</span><span class="fu">rownames</span>(setas_test)</span>
<span id="cb125-12"><a href="preprocesado-de-datos..html#cb125-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb125-13"><a href="preprocesado-de-datos..html#cb125-13" aria-hidden="true" tabindex="-1"></a><span class="co">#Datos validacion:</span></span>
<span id="cb125-14"><a href="preprocesado-de-datos..html#cb125-14" aria-hidden="true" tabindex="-1"></a>medoides_setas_validacion<span class="ot">=</span><span class="fu">rbind</span>(setas_train[k60<span class="sc">$</span>medoid,],setas_validacion)</span>
<span id="cb125-15"><a href="preprocesado-de-datos..html#cb125-15" aria-hidden="true" tabindex="-1"></a>distancia_medoides_validacion<span class="ot">=</span><span class="fu">distance</span>(medoides_setas_validacion[,<span class="dv">2</span><span class="sc">:</span><span class="dv">117</span>],<span class="at">method=</span><span class="st">&quot;dice&quot;</span>)</span>
<span id="cb125-16"><a href="preprocesado-de-datos..html#cb125-16" aria-hidden="true" tabindex="-1"></a>setas60_validacion<span class="ot">=</span>distancia_medoides_validacion[<span class="sc">-</span><span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">60</span>),<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">60</span>)]</span>
<span id="cb125-17"><a href="preprocesado-de-datos..html#cb125-17" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(setas60_validacion)<span class="ot">=</span><span class="fu">colnames</span>(setas60_train)</span>
<span id="cb125-18"><a href="preprocesado-de-datos..html#cb125-18" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(setas60_validacion)<span class="ot">=</span><span class="fu">rownames</span>(setas_validacion)</span></code></pre></div>
</div>
<div id="imputación-de-datos-datos-faltantes" class="section level2" number="4.6">
<h2><span class="header-section-number">4.6</span> Imputación de datos (datos faltantes)</h2>
<p>No se requiere de imputación de datos, pues no hay datos faltantes en ninguna de las variables.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="datos.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="modelado.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": false,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
